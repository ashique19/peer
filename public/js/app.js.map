{"version":3,"sources":["plugins.js","actions.js","app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACloBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$(function() {\r\n\r\n    var formElements = function(){                \r\n        // Bootstrap datepicker\r\n        var feDatepicker = function(){                        \r\n            if($(\".datepicker\").length > 0){\r\n                $(\".datepicker\").datepicker({dateFormat: \"yy-mm-dd\"});                \r\n                $(\"#dp-2,#dp-3,#dp-4\").datepicker(); // Sample\r\n            }           \r\n            \r\n        }// END Bootstrap datepicker\r\n        \r\n        //Bootstrap timepicker\r\n        var feTimepicker = function(){\r\n            // Default timepicker\r\n            if($(\".timepicker\").length > 0)\r\n                $('.timepicker').timepicker();\r\n            \r\n            // 24 hours mode timepicker\r\n            if($(\".timepicker24\").length > 0)\r\n                $(\".timepicker24\").timepicker({minuteStep: 5,showSeconds: true,showMeridian: false});\r\n            \r\n        }// END Bootstrap timepicker\r\n        \r\n        //Daterangepicker \r\n        var feDaterangepicker = function(){\r\n            if($(\".daterange\").length > 0)\r\n               $(\".daterange\").daterangepicker({format: 'YYYY-MM-DD',startDate: '2013-01-01',endDate: '2013-12-31'});\r\n        }\r\n        // END Daterangepicker\r\n        \r\n        //Bootstrap colopicker        \r\n        var feColorpicker = function(){\r\n            // Default colorpicker hex\r\n            if($(\".colorpicker\").length > 0)\r\n                $(\".colorpicker\").colorpicker({format: 'hex'});\r\n            \r\n            // RGBA mode\r\n            if($(\".colorpicker_rgba\").length > 0)\r\n                $(\".colorpicker_rgba\").colorpicker({format: 'rgba'});\r\n            \r\n            // Sample\r\n            if($(\"#colorpicker\").length > 0)\r\n                $(\"#colorpicker\").colorpicker();\r\n            \r\n        }// END Bootstrap colorpicker\r\n        \r\n        //Bootstrap select\r\n        var feSelect = function(){\r\n            if($(\".select\").length > 0){\r\n                $(\".select\").selectpicker();\r\n                \r\n                $(\".select\").on(\"change\", function(){\r\n                    if($(this).val() == \"\" || null === $(this).val()){\r\n                        if(!$(this).attr(\"multiple\"))\r\n                            $(this).val(\"\").find(\"option\").removeAttr(\"selected\").prop(\"selected\",false);\r\n                    }else{\r\n                        $(this).find(\"option[value=\"+$(this).val()+\"]\").attr(\"selected\",true);\r\n                    }\r\n                });\r\n            }\r\n        }//END Bootstrap select\r\n        \r\n        \r\n        //Validation Engine\r\n        var feValidation = function(){\r\n            if($(\"form[id^='validate']\").length > 0){\r\n                \r\n                // Validation prefix for custom form elements\r\n                var prefix = \"valPref_\";\r\n                \r\n                //Add prefix to Bootstrap select plugin\r\n                $(\"form[id^='validate'] .select\").each(function(){\r\n                   $(this).next(\"div.bootstrap-select\").attr(\"id\", prefix + $(this).attr(\"id\")).removeClass(\"validate[required]\");\r\n                });\r\n                \r\n                // Validation Engine init\r\n                $(\"form[id^='validate']\").validationEngine('attach', {promptPosition : \"bottomLeft\", scroll: false,\r\n                                                                        onValidationComplete: function(form, status){\r\n                                                                            form.validationEngine(\"updatePromptsPosition\");\r\n                                                                        },\r\n                                                                        prettySelect : true,\r\n                                                                        usePrefix: prefix \r\n                                                                     });              \r\n            }\r\n        }//END Validation Engine\r\n        \r\n        //Masked Inputs\r\n        var feMasked = function(){            \r\n            if($(\"input[class^='mask_']\").length > 0){\r\n                $(\"input.mask_tin\").mask('99-9999999');\r\n                $(\"input.mask_ssn\").mask('999-99-9999');        \r\n                $(\"input.mask_date\").mask('9999-99-99');\r\n                $(\"input.mask_product\").mask('a*-999-a999');\r\n                $(\"input.mask_phone\").mask('99 (999) 999-99-99');\r\n                $(\"input.mask_phone_ext\").mask('99 (999) 999-9999? x99999');\r\n                $(\"input.mask_credit\").mask('9999-9999-9999-9999');        \r\n                $(\"input.mask_percent\").mask('99%');\r\n            }            \r\n        }//END Masked Inputs\r\n        \r\n        //Bootstrap tooltip\r\n        var feTooltips = function(){            \r\n            $(\"body\").tooltip({selector:'[data-toggle=\"tooltip\"]',container:\"body\"});\r\n        }//END Bootstrap tooltip\r\n       \r\n        //Bootstrap Popover\r\n        var fePopover = function(){            \r\n            $(\"[data-toggle=popover]\").popover({ html: true, container: 'body' });\r\n            $(\".popover-dismiss\").popover({trigger: 'focus'});\r\n        }//END Bootstrap Popover\r\n        \r\n        //Tagsinput\r\n        var feTagsinput = function(){\r\n            if($(\".tagsinput\").length > 0){\r\n                \r\n                $(\".tagsinput\").each(function(){\r\n                    \r\n                    if($(this).data(\"placeholder\") != ''){\r\n                        var dt = $(this).data(\"placeholder\");\r\n                    }else\r\n                        var dt = 'add a tag';\r\n                                                            \r\n                    $(this).tagsInput({width: '100%',height:'auto',defaultText: dt});\r\n                });\r\n\r\n            }\r\n        }// END Tagsinput\r\n        \r\n        //iCheckbox and iRadion - custom elements\r\n        var feiCheckbox = function(){\r\n            if($(\".icheckbox\").length > 0){\r\n                 $(\".icheckbox,.iradio\").iCheck({checkboxClass: 'icheckbox_minimal-grey',radioClass: 'iradio_minimal-grey'});\r\n            }\r\n        }\r\n        // END iCheckbox\r\n        \r\n        //Bootstrap file input\r\n        var feBsFileInput = function(){\r\n            \r\n            if($(\"input.fileinput\").length > 0)\r\n                $(\"input.fileinput\").bootstrapFileInput();\r\n            \r\n        }\r\n        //END Bootstrap file input\r\n        \r\n        return {// Init all form element features\r\n\t\tinit: function(){                    \r\n                    feDatepicker();                    \r\n                    feTimepicker();\r\n                    feColorpicker();\r\n                    feSelect();\r\n                    feValidation();\r\n                    feMasked();\r\n                    feTooltips();\r\n                    fePopover();\r\n                    feTagsinput();\r\n                    feiCheckbox();\r\n                    feBsFileInput();\r\n                    feDaterangepicker();\r\n                }\r\n        }\r\n    }();\r\n\r\n    var uiElements = function(){\r\n\r\n        //Datatables\r\n        var uiDatatable = function(){\r\n            if($(\".datatable\").length > 0){                \r\n                $(\".datatable\").dataTable();\r\n                $(\".datatable\").on('page.dt',function () {\r\n                    onresize(100);\r\n                });\r\n            }\r\n            \r\n            if($(\".datatable_simple\").length > 0){                \r\n                $(\".datatable_simple\").dataTable({\"ordering\": false, \"info\": false, \"lengthChange\": false,\"searching\": false});\r\n                $(\".datatable_simple\").on('page.dt',function () {\r\n                    onresize(100);\r\n                });                \r\n            }            \r\n        }//END Datatable        \r\n        \r\n        //RangeSlider // This function can be removed or cleared.\r\n        var uiRangeSlider = function(){\r\n            \r\n            //Default Slider with start value\r\n            if($(\".defaultSlider\").length > 0){                \r\n                $(\".defaultSlider\").each(function(){                    \r\n                    var rsMin = $(this).data(\"min\");\r\n                    var rsMax = $(this).data(\"max\");\r\n\r\n                    $(this).rangeSlider({                        \r\n                        bounds: {min: 1, max: 200},\r\n                        defaultValues: {min: rsMin, max: rsMax}\r\n                    });                    \r\n                });                                \r\n            }//End Default\r\n            \r\n            //Date range slider\r\n            if($(\".dateSlider\").length > 0){                \r\n                $(\".dateSlider\").each(function(){\r\n                    $(this).dateRangeSlider({\r\n                        bounds: {min: new Date(2012, 1, 1), max: new Date(2015, 12, 31)},\r\n                        defaultValues:{min: new Date(2012, 10, 15),max: new Date(2014, 12, 15)}\r\n                    });\r\n                });                                                \r\n            }//End date range slider\r\n            \r\n            //Range slider with predefinde range            \r\n            if($(\".rangeSlider\").length > 0){                \r\n                $(\".rangeSlider\").each(function(){                    \r\n                    var rsMin = $(this).data(\"min\");\r\n                    var rsMax = $(this).data(\"max\");\r\n\r\n                    $(this).rangeSlider({\r\n                        bounds: {min: 1, max: 200},\r\n                        range: {min: 20, max: 40},\r\n                        defaultValues: {min: rsMin, max: rsMax}\r\n                    });                    \r\n                });                                \r\n            }//End\r\n            \r\n            //Range Slider with custom step\r\n            if($(\".stepSlider\").length > 0){                \r\n                $(\".stepSlider\").each(function(){\r\n                    var rsMin = $(this).data(\"min\");\r\n                    var rsMax = $(this).data(\"max\");\r\n\r\n                    $(this).rangeSlider({                        \r\n                        bounds: {min: 1, max: 200},\r\n                        defaultValues: {min: rsMin, max: rsMax},\r\n                        step: 10\r\n                    });    \r\n                });                                                \r\n            }//End\r\n            \r\n        }//END RangeSlider\r\n        \r\n        //Start Knob Plugin\r\n        var uiKnob = function(){\r\n            \r\n            if($(\".knob\").length > 0){\r\n                $(\".knob\").knob();\r\n            }            \r\n            \r\n        }//End Knob\r\n        \r\n        // Start Smart Wizard\r\n        var uiSmartWizard = function(){\r\n            \r\n            if($(\".wizard\").length > 0){\r\n                \r\n                //Check count of steps in each wizard\r\n                $(\".wizard > ul\").each(function(){\r\n                    $(this).addClass(\"steps_\"+$(this).children(\"li\").length);\r\n                });//end\r\n                \r\n                // This par of code used for example\r\n                if($(\"#wizard-validation\").length > 0){\r\n                    \r\n                    var validator = $(\"#wizard-validation\").validate({\r\n                            rules: {\r\n                                login: {\r\n                                    required: true,\r\n                                    minlength: 2,\r\n                                    maxlength: 8\r\n                                },\r\n                                password: {\r\n                                    required: true,\r\n                                    minlength: 5,\r\n                                    maxlength: 10\r\n                                },\r\n                                repassword: {\r\n                                    required: true,\r\n                                    minlength: 5,\r\n                                    maxlength: 10,\r\n                                    equalTo: \"#password\"\r\n                                },\r\n                                email: {\r\n                                    required: true,\r\n                                    email: true\r\n                                },\r\n                                name: {\r\n                                    required: true,\r\n                                    maxlength: 10\r\n                                },\r\n                                adress: {\r\n                                    required: true\r\n                                }\r\n                            }\r\n                        });\r\n                        \r\n                }// End of example\r\n                \r\n                $(\".wizard\").smartWizard({                        \r\n                    // This part of code can be removed FROM\r\n                    onLeaveStep: function(obj){\r\n                        var wizard = obj.parents(\".wizard\");\r\n\r\n                        if(wizard.hasClass(\"wizard-validation\")){\r\n                            \r\n                            var valid = true;\r\n                            \r\n                            $('input,textarea',$(obj.attr(\"href\"))).each(function(i,v){\r\n                                valid = validator.element(v) && valid;\r\n                            });\r\n                                                        \r\n                            if(!valid){\r\n                                wizard.find(\".stepContainer\").removeAttr(\"style\");\r\n                                validator.focusInvalid();                                \r\n                                return false;\r\n                            }         \r\n                            \r\n                        }    \r\n                        \r\n                        return true;\r\n                    },// <-- TO\r\n                    \r\n                    //This is important part of wizard init\r\n                    onShowStep: function(obj){                        \r\n                        var wizard = obj.parents(\".wizard\");\r\n\r\n                        if(wizard.hasClass(\"show-submit\")){\r\n                        \r\n                            var step_num = obj.attr('rel');\r\n                            var step_max = obj.parents(\".anchor\").find(\"li\").length;\r\n\r\n                            if(step_num == step_max){                             \r\n                                obj.parents(\".wizard\").find(\".actionBar .btn-primary\").css(\"display\",\"block\");\r\n                            }                         \r\n                        }\r\n                        return true;                         \r\n                    }//End\r\n                });\r\n            }            \r\n            \r\n        }// End Smart Wizard\r\n        \r\n        //OWL Carousel\r\n        var uiOwlCarousel = function(){\r\n            \r\n            if($(\".owl-carousel\").length > 0){\r\n                $(\".owl-carousel\").owlCarousel({mouseDrag: false, touchDrag: true, slideSpeed: 300, paginationSpeed: 400, singleItem: true, navigation: false,autoPlay: true});\r\n            }\r\n            \r\n        }//End OWL Carousel\r\n        \r\n        // Summernote \r\n        var uiSummernote = function(){\r\n            /* Extended summernote editor */\r\n            if($(\".summernote\").length > 0){\r\n                $(\".summernote\").summernote({height: 250,\r\n                                             codemirror: {\r\n                                                mode: 'text/html',\r\n                                                htmlMode: true,\r\n                                                lineNumbers: true,\r\n                                                theme: 'default'\r\n                                              }\r\n                });\r\n            }\r\n            /* END Extended summernote editor */\r\n            \r\n            /* Lite summernote editor */\r\n            if($(\".summernote_lite\").length > 0){\r\n                \r\n                $(\".summernote_lite\").on(\"focus\",function(){\r\n                    \r\n                    $(\".summernote_lite\").summernote({height: 100, focus: true,\r\n                                                      toolbar: [\r\n                                                          [\"style\", [\"bold\", \"italic\", \"underline\", \"clear\"]],\r\n                                                          [\"insert\",[\"link\",\"picture\",\"video\"]]                                                          \r\n                                                      ]\r\n                                                     });\r\n                });                \r\n            }\r\n            /* END Lite summernote editor */\r\n            \r\n            /* Email summernote editor */\r\n            if($(\".summernote_email\").length > 0){\r\n                                                    \r\n                $(\".summernote_email\").summernote({height: 400, focus: true,\r\n                                                  toolbar: [\r\n                                                      ['style', ['bold', 'italic', 'underline', 'clear']],\r\n                                                      ['font', ['strikethrough']],\r\n                                                      ['fontsize', ['fontsize']],\r\n                                                      ['color', ['color']],\r\n                                                      ['para', ['ul', 'ol', 'paragraph']],\r\n                                                      ['height', ['height']]                                                          \r\n                                                  ]\r\n                                                 });\r\n                \r\n            }\r\n            /* END Email summernote editor */\r\n            \r\n        }// END Summernote \r\n        \r\n        // Custom Content Scroller\r\n        var uiScroller = function(){\r\n            \r\n            if($(\".scroll\").length > 0){\r\n                $(\".scroll\").niceScroll();\r\n            }\r\n            \r\n        }// END Custom Content Scroller\r\n       \r\n        // Sparkline\r\n        var uiSparkline = function(){\r\n            \r\n            if($(\".sparkline\").length > 0)\r\n               $(\".sparkline\").sparkline('html', { enableTagOptions: true,disableHiddenCheck: true});   \r\n           \r\n       }// End sparkline              \r\n       \r\n        $(window).resize(function(){\r\n            if($(\".owl-carousel\").length > 0){\r\n                $(\".owl-carousel\").data('owlCarousel').destroy();\r\n                uiOwlCarousel();\r\n            }\r\n        });\r\n       \r\n        return {\r\n            init: function(){\r\n                uiDatatable();\r\n                uiRangeSlider();\r\n                uiKnob();\r\n                uiSmartWizard();\r\n                uiOwlCarousel();\r\n                uiSummernote();\r\n                uiScroller();\r\n                uiSparkline();\r\n            }\r\n        }\r\n        \r\n    }();\r\n\r\n    var templatePlugins = function(){\r\n        \r\n        var tp_clock = function(){\r\n            \r\n            function tp_clock_time(){\r\n                var now     = new Date();\r\n                var hour    = now.getHours();\r\n                var minutes = now.getMinutes();                    \r\n                \r\n                hour = hour < 10 ? '0'+hour : hour;\r\n                minutes = minutes < 10 ? '0'+minutes : minutes;\r\n                \r\n                $(\".plugin-clock\").html(hour+\"<span>:</span>\"+minutes);\r\n            }\r\n            if($(\".plugin-clock\").length > 0){\r\n                \r\n                tp_clock_time();\r\n                \r\n                window.setInterval(function(){\r\n                    tp_clock_time();                    \r\n                },10000);\r\n                \r\n            }\r\n        }\r\n        \r\n        var tp_date = function(){\r\n            \r\n            if($(\".plugin-date\").length > 0){\r\n                \r\n                var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\r\n                var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\n                        \r\n                var now     = new Date();\r\n                var day     = days[now.getDay()];\r\n                var date    = now.getDate();\r\n                var month   = months[now.getMonth()];\r\n                var year    = now.getFullYear();\r\n                \r\n                $(\".plugin-date\").html(day+\", \"+month+\" \"+date+\", \"+year);\r\n            }\r\n            \r\n        }\r\n        \r\n        return {\r\n            init: function(){\r\n                tp_clock();\r\n                tp_date();\r\n            }\r\n        }\r\n    }();\r\n    \r\n    var fullCalendar = function(){\r\n            \r\n        var calendar = function(){\r\n            \r\n            if($(\"#calendar\").length > 0){\r\n                \r\n                function prepare_external_list(){\r\n                    \r\n                    $('#external-events .external-event').each(function() {\r\n                            var eventObject = {title: $.trim($(this).text())};\r\n\r\n                            $(this).data('eventObject', eventObject);\r\n                            $(this).draggable({\r\n                                    zIndex: 999,\r\n                                    revert: true,\r\n                                    revertDuration: 0\r\n                            });\r\n                    });                    \r\n                    \r\n                }\r\n                \r\n                \r\n                var date = new Date();\r\n                var d = date.getDate();\r\n                var m = date.getMonth();\r\n                var y = date.getFullYear();\r\n\r\n                prepare_external_list();\r\n\r\n                var calendar = $('#calendar').fullCalendar({\r\n                    header: {\r\n                        left: 'prev,next today',\r\n                        center: 'title',\r\n                        right: 'month,agendaWeek,agendaDay'\r\n                    },\r\n                    editable: true,\r\n                    eventSources: {url: \"assets/ajax_fullcalendar.php\"},\r\n                    droppable: true,\r\n                    selectable: true,\r\n                    selectHelper: true,\r\n                    select: function(start, end, allDay) {\r\n                        var title = prompt('Event Title:');\r\n                        if (title) {\r\n                            calendar.fullCalendar('renderEvent',\r\n                            {\r\n                                title: title,\r\n                                start: start,\r\n                                end: end,\r\n                                allDay: allDay\r\n                            },\r\n                            true\r\n                            );\r\n                        }\r\n                        calendar.fullCalendar('unselect');\r\n                    },\r\n                    drop: function(date, allDay) {\r\n\r\n                        var originalEventObject = $(this).data('eventObject');\r\n\r\n                        var copiedEventObject = $.extend({}, originalEventObject);\r\n\r\n                        copiedEventObject.start = date;\r\n                        copiedEventObject.allDay = allDay;\r\n\r\n                        $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);\r\n\r\n\r\n                        if ($('#drop-remove').is(':checked')) {\r\n                            $(this).remove();\r\n                        }\r\n\r\n                    }\r\n                });\r\n                \r\n                $(\"#new-event\").on(\"click\",function(){\r\n                    var et = $(\"#new-event-text\").val();\r\n                    if(et != ''){\r\n                        $(\"#external-events\").prepend('<a class=\"list-group-item external-event\">'+et+'</a>');\r\n                        prepare_external_list();\r\n                    }\r\n                });\r\n                \r\n            }            \r\n        }\r\n        \r\n        return {\r\n            init: function(){\r\n                calendar();\r\n            }\r\n        }\r\n    }();\r\n    \r\n    formElements.init();\r\n    uiElements.init();\r\n    templatePlugins.init();    \r\n    \r\n    fullCalendar.init();\r\n    \r\n    /* My Custom Progressbar */\r\n    $.mpb = function(action,options){\r\n\r\n        var settings = $.extend({\r\n            state: '',            \r\n            value: [0,0],\r\n            position: '',\r\n            speed: 20,\r\n            complete: null\r\n        },options);\r\n\r\n        if(action == 'show' || action == 'update'){\r\n            \r\n            if(action == 'show'){\r\n                $(\".mpb\").remove();\r\n                var mpb = '<div class=\"mpb '+settings.position+'\">\\n\\\r\n                               <div class=\"mpb-progress'+(settings.state != '' ? ' mpb-'+settings.state: '')+'\" style=\"width:'+settings.value[0]+'%;\"></div>\\n\\\r\n                           </div>';\r\n                $('body').append(mpb);\r\n            }\r\n            \r\n            var i  = $.isArray(settings.value) ? settings.value[0] : $(\".mpb .mpb-progress\").width();\r\n            var to = $.isArray(settings.value) ? settings.value[1] : settings.value;            \r\n            \r\n            var timer = setInterval(function(){\r\n                $(\".mpb .mpb-progress\").css('width',i+'%'); i++;\r\n                \r\n                if(i > to){\r\n                    clearInterval(timer);\r\n                    if($.isFunction(settings.complete)){\r\n                        settings.complete.call(this);\r\n                    }\r\n                }\r\n            }, settings.speed);\r\n\r\n        }\r\n\r\n        if(action == 'destroy'){\r\n            $(\".mpb\").remove();\r\n        }                \r\n        \r\n    }\r\n    /* Eof My Custom Progressbar */\r\n    \r\n    \r\n    // New selector case insensivity        \r\n     $.expr[':'].containsi = function(a, i, m) {\r\n         return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;\r\n     };              \r\n});\r\n\r\nObject.size = function(obj) {\r\n    var size = 0, key;\r\n    for (key in obj) {\r\n        if (obj.hasOwnProperty(key)) size++;\r\n    }\r\n    return size;\r\n};","$(document).ready(function(){        \r\n    \r\n    /* PROGGRESS START */\r\n    $.mpb(\"show\",{value: [0,50],speed: 5});        \r\n    /* END PROGGRESS START */\r\n    \r\n    var html_click_avail = true;\r\n    \r\n    $(\"html\").on(\"click\", function(){\r\n        if(html_click_avail)\r\n            $(\".x-navigation-horizontal li,.x-navigation-minimized li\").removeClass('active');        \r\n    });        \r\n    \r\n    $(\".x-navigation-horizontal .panel\").on(\"click\",function(e){\r\n        e.stopPropagation();\r\n    });    \r\n    \r\n    /* WIDGETS (DEMO)*/\r\n    $(\".widget-remove\").on(\"click\",function(){\r\n        $(this).parents(\".widget\").fadeOut(400,function(){\r\n            $(this).remove();\r\n            $(\"body > .tooltip\").remove();\r\n        });\r\n        return false;\r\n    });\r\n    /* END WIDGETS */\r\n    \r\n    /* Gallery Items */\r\n    $(\".gallery-item .iCheck-helper\").on(\"click\",function(){\r\n        var wr = $(this).parent(\"div\");\r\n        if(wr.hasClass(\"checked\")){\r\n            $(this).parents(\".gallery-item\").addClass(\"active\");\r\n        }else{            \r\n            $(this).parents(\".gallery-item\").removeClass(\"active\");\r\n        }\r\n    });\r\n    $(\".gallery-item-remove\").on(\"click\",function(){\r\n        $(this).parents(\".gallery-item\").fadeOut(400,function(){\r\n            $(this).remove();\r\n        });\r\n        return false;\r\n    });\r\n    $(\"#gallery-toggle-items\").on(\"click\",function(){\r\n        \r\n        $(\".gallery-item\").each(function(){\r\n            \r\n            var wr = $(this).find(\".iCheck-helper\").parent(\"div\");\r\n            \r\n            if(wr.hasClass(\"checked\")){\r\n                $(this).removeClass(\"active\");\r\n                wr.removeClass(\"checked\");\r\n                wr.find(\"input\").prop(\"checked\",false);\r\n            }else{            \r\n                $(this).addClass(\"active\");\r\n                wr.addClass(\"checked\");\r\n                wr.find(\"input\").prop(\"checked\",true);\r\n            }\r\n            \r\n        });\r\n        \r\n    });\r\n    /* END Gallery Items */\r\n\r\n    // XN PANEL DRAGGING\r\n    $( \".xn-panel-dragging\" ).draggable({\r\n        containment: \".page-content\", handle: \".panel-heading\", scroll: false,\r\n        start: function(event,ui){\r\n            html_click_avail = false;\r\n            $(this).addClass(\"dragged\");\r\n        },\r\n        stop: function( event, ui ) {\r\n            $(this).resizable({\r\n                maxHeight: 400,\r\n                maxWidth: 600,\r\n                minHeight: 200,\r\n                minWidth: 200,\r\n                helper: \"resizable-helper\",\r\n                start: function( event, ui ) {\r\n                    html_click_avail = false;\r\n                },\r\n                stop: function( event, ui ) {\r\n                    $(this).find(\".panel-body\").height(ui.size.height - 82);\r\n                    $(this).find(\".scroll\").mCustomScrollbar(\"update\");\r\n                                            \r\n                    setTimeout(function(){\r\n                        html_click_avail = true; \r\n                    },1000);\r\n                                            \r\n                }\r\n            })\r\n            \r\n            setTimeout(function(){\r\n                html_click_avail = true; \r\n            },1000);            \r\n        }\r\n    });\r\n    // END XN PANEL DRAGGING\r\n    \r\n    /* DROPDOWN TOGGLE */\r\n    $(\".dropdown-toggle\").on(\"click\",function(){\r\n        onresize();\r\n    });\r\n    /* DROPDOWN TOGGLE */\r\n    \r\n    /* MESSAGE BOX */\r\n    $(\".mb-control\").on(\"click\",function(){\r\n        var box = $($(this).data(\"box\"));\r\n        if(box.length > 0){\r\n            box.toggleClass(\"open\");\r\n            \r\n            var sound = box.data(\"sound\");\r\n            \r\n            if(sound === 'alert')\r\n                playAudio('alert');\r\n            \r\n            if(sound === 'fail')\r\n                playAudio('fail');\r\n            \r\n        }        \r\n        return false;\r\n    });\r\n    $(\".mb-control-close\").on(\"click\",function(){\r\n       $(this).parents(\".message-box\").removeClass(\"open\");\r\n       return false;\r\n    });    \r\n    /* END MESSAGE BOX */\r\n    \r\n    /* CONTENT FRAME */\r\n    $(\".content-frame-left-toggle\").on(\"click\",function(){\r\n        $(\".content-frame-left\").is(\":visible\") \r\n        ? $(\".content-frame-left\").hide() \r\n        : $(\".content-frame-left\").show();\r\n        page_content_onresize();\r\n    });\r\n    $(\".content-frame-right-toggle\").on(\"click\",function(){\r\n        $(\".content-frame-right\").is(\":visible\") \r\n        ? $(\".content-frame-right\").hide() \r\n        : $(\".content-frame-right\").show();\r\n        page_content_onresize();\r\n    });    \r\n    /* END CONTENT FRAME */\r\n    \r\n    /* MAILBOX */\r\n    $(\".mail .mail-star\").on(\"click\",function(){\r\n        $(this).toggleClass(\"starred\");\r\n    });\r\n    \r\n    $(\".mail-checkall .iCheck-helper\").on(\"click\",function(){\r\n        \r\n        var prop = $(this).prev(\"input\").prop(\"checked\");\r\n                    \r\n        $(\".mail .mail-item\").each(function(){            \r\n            var cl = $(this).find(\".mail-checkbox > div\");            \r\n            cl.toggleClass(\"checked\",prop).find(\"input\").prop(\"checked\",prop);                        \r\n        }); \r\n        \r\n    });\r\n    /* END MAILBOX */\r\n    \r\n    /* PANELS */\r\n    \r\n    $(\".panel-fullscreen\").on(\"click\",function(){\r\n        panel_fullscreen($(this).parents(\".panel\"));\r\n        return false;\r\n    });\r\n    \r\n    $(\".panel-collapse\").on(\"click\",function(){\r\n        panel_collapse($(this).parents(\".panel\"));\r\n        $(this).parents(\".dropdown\").removeClass(\"open\");\r\n        return false;\r\n    });    \r\n    $(\".panel-remove\").on(\"click\",function(){\r\n        panel_remove($(this).parents(\".panel\"));\r\n        $(this).parents(\".dropdown\").removeClass(\"open\");\r\n        return false;\r\n    });\r\n    $(\".panel-refresh\").on(\"click\",function(){\r\n        var panel = $(this).parents(\".panel\");\r\n        panel_refresh(panel);\r\n\r\n        setTimeout(function(){\r\n            panel_refresh(panel);\r\n        },3000);\r\n        \r\n        $(this).parents(\".dropdown\").removeClass(\"open\");\r\n        return false;\r\n    });\r\n    /* EOF PANELS */\r\n    \r\n    /* ACCORDION */\r\n    $(\".accordion .panel-title a\").on(\"click\",function(){\r\n        \r\n        var blockOpen = $(this).attr(\"href\");\r\n        var accordion = $(this).parents(\".accordion\");        \r\n        var noCollapse = accordion.hasClass(\"accordion-dc\");\r\n        \r\n        \r\n        if($(blockOpen).length > 0){            \r\n            \r\n            if($(blockOpen).hasClass(\"panel-body-open\")){\r\n                $(blockOpen).slideUp(200,function(){\r\n                    $(this).removeClass(\"panel-body-open\");\r\n                });\r\n            }else{\r\n                $(blockOpen).slideDown(200,function(){\r\n                    $(this).addClass(\"panel-body-open\");\r\n                });\r\n            }\r\n            \r\n            if(!noCollapse){\r\n                accordion.find(\".panel-body-open\").not(blockOpen).slideUp(200,function(){\r\n                    $(this).removeClass(\"panel-body-open\");\r\n                });                                           \r\n            }\r\n            \r\n            return false;\r\n        }\r\n        \r\n    });\r\n    /* EOF ACCORDION */\r\n    \r\n    /* DATATABLES/CONTENT HEIGHT FIX */\r\n    $(\".dataTables_length select\").on(\"change\",function(){\r\n        onresize();\r\n    });\r\n    /* END DATATABLES/CONTENT HEIGHT FIX */\r\n    \r\n    /* TOGGLE FUNCTION */\r\n    $(\".toggle\").on(\"click\",function(){\r\n        var elm = $(\"#\"+$(this).data(\"toggle\"));\r\n        if(elm.is(\":visible\"))\r\n            elm.addClass(\"hidden\").removeClass(\"show\");\r\n        else\r\n            elm.addClass(\"show\").removeClass(\"hidden\");\r\n        \r\n        return false;\r\n    });\r\n    /* END TOGGLE FUNCTION */\r\n    \r\n    /* MESSAGES LOADING */\r\n    $(\".messages .item\").each(function(index){\r\n        var elm = $(this);\r\n        setInterval(function(){\r\n            elm.addClass(\"item-visible\");\r\n        },index*300);              \r\n    });\r\n    /* END MESSAGES LOADING */\r\n    \r\n    x_navigation();\r\n});\r\n\r\n$(function(){            \r\n    onload();\r\n\r\n    /* PROGGRESS COMPLETE */\r\n    $.mpb(\"update\",{value: 100, speed: 5, complete: function(){            \r\n        $(\".mpb\").fadeOut(200,function(){\r\n            $(this).remove();\r\n        });\r\n    }});\r\n    /* END PROGGRESS COMPLETE */\r\n});\r\n\r\n$(window).resize(function(){\r\n    x_navigation_onresize();\r\n    page_content_onresize();\r\n});\r\n\r\nfunction onload(){\r\n    x_navigation_onresize();    \r\n    page_content_onresize();\r\n}\r\n\r\nfunction page_content_onresize(){\r\n    $(\".page-content,.content-frame-body,.content-frame-right,.content-frame-left\").css(\"width\",\"\").css(\"height\",\"\");\r\n    \r\n    var content_minus = 0;\r\n    content_minus = ($(\".page-container-boxed\").length > 0) ? 40 : content_minus;\r\n    content_minus += ($(\".page-navigation-top-fixed\").length > 0) ? 50 : 0;\r\n    \r\n    var content = $(\".page-content\");\r\n    var sidebar = $(\".page-sidebar\");\r\n    \r\n    if(content.height() < $(document).height() - content_minus){        \r\n        content.height($(document).height() - content_minus);\r\n    }        \r\n    \r\n    if(sidebar.height() > content.height()){        \r\n        content.height(sidebar.height());\r\n    }\r\n    \r\n    if($(window).width() > 1024){\r\n        \r\n        if($(\".page-sidebar\").hasClass(\"scroll\")){\r\n            if($(\"body\").hasClass(\"page-container-boxed\")){\r\n                var doc_height = $(document).height() - 40;\r\n            }else{\r\n                var doc_height = $(window).height();\r\n            }\r\n           $(\".page-sidebar\").height(doc_height);\r\n           \r\n       }\r\n       \r\n        if($(\".content-frame-body\").height() < $(document).height()-162){\r\n            $(\".content-frame-body,.content-frame-right,.content-frame-left\").height($(document).height()-162);            \r\n        }else{\r\n            $(\".content-frame-right,.content-frame-left\").height($(\".content-frame-body\").height());\r\n        }\r\n        \r\n        $(\".content-frame-left\").show();\r\n        $(\".content-frame-right\").show();\r\n    }else{\r\n        $(\".content-frame-body\").height($(\".content-frame\").height()-80);\r\n        \r\n        if($(\".page-sidebar\").hasClass(\"scroll\"))\r\n           $(\".page-sidebar\").css(\"height\",\"\");\r\n    }\r\n    \r\n    if($(window).width() < 1200){\r\n        if($(\"body\").hasClass(\"page-container-boxed\")){\r\n            $(\"body\").removeClass(\"page-container-boxed\").data(\"boxed\",\"1\");\r\n        }\r\n    }else{\r\n        if($(\"body\").data(\"boxed\") === \"1\"){\r\n            $(\"body\").addClass(\"page-container-boxed\").data(\"boxed\",\"\");\r\n        }\r\n    }\r\n}\r\n\r\n/* PANEL FUNCTIONS */\r\nfunction panel_fullscreen(panel){    \r\n    \r\n    if(panel.hasClass(\"panel-fullscreened\")){\r\n        panel.removeClass(\"panel-fullscreened\").unwrap();\r\n        panel.find(\".panel-body,.chart-holder\").css(\"height\",\"\");\r\n        panel.find(\".panel-fullscreen .fa\").removeClass(\"fa-compress\").addClass(\"fa-expand\");        \r\n        \r\n        $(window).resize();\r\n    }else{\r\n        var head    = panel.find(\".panel-heading\");\r\n        var body    = panel.find(\".panel-body\");\r\n        var footer  = panel.find(\".panel-footer\");\r\n        var hplus   = 30;\r\n        \r\n        if(body.hasClass(\"panel-body-table\") || body.hasClass(\"padding-0\")){\r\n            hplus = 0;\r\n        }\r\n        if(head.length > 0){\r\n            hplus += head.height()+21;\r\n        } \r\n        if(footer.length > 0){\r\n            hplus += footer.height()+21;\r\n        } \r\n\r\n        panel.find(\".panel-body,.chart-holder\").height($(window).height() - hplus);\r\n        \r\n        \r\n        panel.addClass(\"panel-fullscreened\").wrap('<div class=\"panel-fullscreen-wrap\"></div>');        \r\n        panel.find(\".panel-fullscreen .fa\").removeClass(\"fa-expand\").addClass(\"fa-compress\");\r\n        \r\n        $(window).resize();\r\n    }\r\n}\r\n\r\nfunction panel_collapse(panel,action,callback){\r\n\r\n    if(panel.hasClass(\"panel-toggled\")){        \r\n        panel.removeClass(\"panel-toggled\");\r\n        \r\n        panel.find(\".panel-collapse .fa-angle-up\").removeClass(\"fa-angle-up\").addClass(\"fa-angle-down\");\r\n\r\n        if(action && action === \"shown\" && typeof callback === \"function\")\r\n            callback();            \r\n\r\n        onload();\r\n                \r\n    }else{\r\n        panel.addClass(\"panel-toggled\");\r\n                \r\n        panel.find(\".panel-collapse .fa-angle-down\").removeClass(\"fa-angle-down\").addClass(\"fa-angle-up\");\r\n\r\n        if(action && action === \"hidden\" && typeof callback === \"function\")\r\n            callback();\r\n\r\n        onload();        \r\n        \r\n    }\r\n}\r\nfunction panel_refresh(panel,action,callback){        \r\n    if(!panel.hasClass(\"panel-refreshing\")){\r\n        panel.append('<div class=\"panel-refresh-layer\"><img src=\"img/loaders/default.gif\"/></div>');\r\n        panel.find(\".panel-refresh-layer\").width(panel.width()).height(panel.height());\r\n        panel.addClass(\"panel-refreshing\");\r\n        \r\n        if(action && action === \"shown\" && typeof callback === \"function\") \r\n            callback();\r\n    }else{\r\n        panel.find(\".panel-refresh-layer\").remove();\r\n        panel.removeClass(\"panel-refreshing\");\r\n        \r\n        if(action && action === \"hidden\" && typeof callback === \"function\") \r\n            callback();        \r\n    }       \r\n    onload();\r\n}\r\nfunction panel_remove(panel,action,callback){    \r\n    if(action && action === \"before\" && typeof callback === \"function\") \r\n        callback();\r\n    \r\n    panel.animate({'opacity':0},200,function(){\r\n        panel.parent(\".panel-fullscreen-wrap\").remove();\r\n        $(this).remove();        \r\n        if(action && action === \"after\" && typeof callback === \"function\") \r\n            callback();\r\n        \r\n        \r\n        onload();\r\n    });    \r\n}\r\n/* EOF PANEL FUNCTIONS */\r\n\r\n/* X-NAVIGATION CONTROL FUNCTIONS */\r\nfunction x_navigation_onresize(){    \r\n    \r\n    var inner_port = window.innerWidth || $(document).width();\r\n    \r\n    if(inner_port < 1025){               \r\n        $(\".page-sidebar .x-navigation\").removeClass(\"x-navigation-minimized\");\r\n        $(\".page-container\").removeClass(\"page-container-wide\");\r\n        $(\".page-sidebar .x-navigation li.active\").removeClass(\"active\");\r\n        \r\n                \r\n        $(\".x-navigation-horizontal\").each(function(){            \r\n            if(!$(this).hasClass(\"x-navigation-panel\")){                \r\n                $(\".x-navigation-horizontal\").addClass(\"x-navigation-h-holder\").removeClass(\"x-navigation-horizontal\");\r\n            }\r\n        });\r\n        \r\n        \r\n    }else{        \r\n        if($(\".page-navigation-toggled\").length > 0){\r\n            x_navigation_minimize(\"close\");\r\n        }       \r\n        \r\n        $(\".x-navigation-h-holder\").addClass(\"x-navigation-horizontal\").removeClass(\"x-navigation-h-holder\");                \r\n    }\r\n    \r\n}\r\n\r\nfunction x_navigation_minimize(action){\r\n    \r\n    if(action == 'open'){\r\n        $(\".page-container\").removeClass(\"page-container-wide\");\r\n        $(\".page-sidebar .x-navigation\").removeClass(\"x-navigation-minimized\");\r\n        $(\".x-navigation-minimize\").find(\".fa\").removeClass(\"fa-indent\").addClass(\"fa-dedent\");\r\n        $(\".page-sidebar.scroll\").mCustomScrollbar(\"update\");\r\n    }\r\n    \r\n    if(action == 'close'){\r\n        $(\".page-container\").addClass(\"page-container-wide\");\r\n        $(\".page-sidebar .x-navigation\").addClass(\"x-navigation-minimized\");\r\n        $(\".x-navigation-minimize\").find(\".fa\").removeClass(\"fa-dedent\").addClass(\"fa-indent\");\r\n        $(\".page-sidebar.scroll\").mCustomScrollbar(\"disable\",true);\r\n    }\r\n    \r\n    $(\".x-navigation li.active\").removeClass(\"active\");\r\n    \r\n}\r\n\r\nfunction x_navigation(){\r\n    \r\n    $(\".x-navigation-control\").click(function(){\r\n        $(this).parents(\".x-navigation\").toggleClass(\"x-navigation-open\");\r\n        \r\n        onresize();\r\n        \r\n        return false;\r\n    });\r\n\r\n    if($(\".page-navigation-toggled\").length > 0){\r\n        x_navigation_minimize(\"close\");\r\n    }    \r\n    \r\n    $(\".x-navigation-minimize\").click(function(){\r\n                \r\n        if($(\".page-sidebar .x-navigation\").hasClass(\"x-navigation-minimized\")){\r\n            $(\".page-container\").removeClass(\"page-navigation-toggled\");\r\n            x_navigation_minimize(\"open\");\r\n        }else{            \r\n            $(\".page-container\").addClass(\"page-navigation-toggled\");\r\n            x_navigation_minimize(\"close\");            \r\n        }\r\n        \r\n        onresize();\r\n        \r\n        return false;        \r\n    });\r\n       \r\n    $(\".x-navigation  li > a\").click(function(){\r\n        \r\n        var li = $(this).parent('li');        \r\n        var ul = li.parent(\"ul\");\r\n        \r\n        ul.find(\" > li\").not(li).removeClass(\"active\");    \r\n        \r\n    });\r\n    \r\n    $(\".x-navigation li\").click(function(event){\r\n        event.stopPropagation();\r\n        \r\n        var li = $(this);\r\n                \r\n            if(li.children(\"ul\").length > 0 || li.children(\".panel\").length > 0 || $(this).hasClass(\"xn-profile\") > 0){\r\n                if(li.hasClass(\"active\")){\r\n                    li.removeClass(\"active\");\r\n                    li.find(\"li.active\").removeClass(\"active\");\r\n                }else\r\n                    li.addClass(\"active\");\r\n                    \r\n                onresize();\r\n                \r\n                if($(this).hasClass(\"xn-profile\") > 0)\r\n                    return true;\r\n                else\r\n                    return false;\r\n            }                                     \r\n    });\r\n    \r\n    /* XN-SEARCH */\r\n    $(\".xn-search\").on(\"click\",function(){\r\n        $(this).find(\"input\").focus();\r\n    })\r\n    /* END XN-SEARCH */\r\n    \r\n}\r\n/* EOF X-NAVIGATION CONTROL FUNCTIONS */\r\n\r\n/* PAGE ON RESIZE WITH TIMEOUT */\r\nfunction onresize(timeout){    \r\n    timeout = timeout ? timeout : 200;\r\n\r\n    setTimeout(function(){\r\n        page_content_onresize();\r\n    },timeout);\r\n}\r\n/* EOF PAGE ON RESIZE WITH TIMEOUT */\r\n\r\n/* PLAY SOUND FUNCTION */\r\nfunction playAudio(file){\r\n    if(file === 'alert')\r\n        document.getElementById('audio-alert').play();\r\n\r\n    if(file === 'fail')\r\n        document.getElementById('audio-fail').play();    \r\n}\r\n/* END PLAY SOUND FUNCTION */\r\n\r\n/* NEW OBJECT(GET SIZE OF ARRAY) */\r\nObject.size = function(obj) {\r\n    var size = 0, key;\r\n    for (key in obj) {\r\n        if (obj.hasOwnProperty(key)) size++;\r\n    }\r\n    return size;\r\n};\r\n/* EOF NEW OBJECT(GET SIZE OF ARRAY) */","var cart = {\n  products:   [],\n  travellers: [],\n  buyers:     []\n};\n\nvar chat = {\n  contact: {},\n  message: {},\n  offer: {}\n};\n\nvar amazon_form = \"\", elsewhere_form = \"\";\n\nvar shipping_label_product = \"\";\n\nvar Calculator = function(price, traveler_commission) {\n\n  var full_price = price * 1 + traveler_commission * 1;\n\n  var charges = $.parseJSON($('.charges').attr('charges'));\n\n  var commission_charge = parseFloat(parseFloat(full_price).toFixed(2) * charges.commission_rate / 100).toFixed(2),\n    transaction_charge = parseFloat(parseFloat(full_price).toFixed(2) * charges.transaction_charge_rate / 100).toFixed(2);\n\n  return {\n    'price': price,\n    'traveler_commission': traveler_commission,\n    'price_with_traveler_commission': full_price,\n\n    'commission_rate': charges.commission_rate,\n    'commission_charge': commission_charge,\n    'price_with_commission': parseFloat(full_price * 1 + commission_charge * 1).toFixed(2),\n\n    'transaction_rate': charges.transaction_charge_rate,\n    'transaction_charge': transaction_charge,\n    'fixed_transaction_charge': charges.fixed_transaction_charge,\n    'price_with_transaction_charge': parseFloat(full_price * 1 + charges.fixed_transaction_charge * 1 + transaction_charge * 1).toFixed(2),\n\n    'total': parseFloat(full_price * 1 + commission_charge * 1 + transaction_charge * 1 + charges.fixed_transaction_charge * 1).toFixed(2)\n  };\n\n};\n\nfunction add_to_cart(item) {\n\n  var products = cart.products;\n\n  if (item) {\n\n    var product = {\n      link: $(item).attr('p_link'),\n      name: $(item).attr('p_name'),\n      image: $(item).attr('p_image'),\n      price: $(item).attr('p_price'),\n    };\n\n    var is_product_in_cart = _.findLastIndex(products, {\n      'link': product.link\n    });\n\n    if (is_product_in_cart < 0) {\n      products.push(product);\n\n      $.get('/user/wishlist/products/store', product);\n\n      // $.get('/user/add-to-my-buy', product);\n\n    }\n\n    $('[p_link=\"' + product.link + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n\n  }\n\n  cart.products = products;\n  // $.jStorage.set('cart', cart);\n\n}\n\nfunction remove_from_cart(item_id) {\n\n  if (cart.products[item_id]) {\n\n    var item = cart.products[item_id];\n\n    // cart.products[item_id] = null;\n\n  }\n\n}\n\nfunction mark_products_added() {\n  if (cart.products.length > 0) {\n    $.each(cart.products, function(i, v) {\n      $('.self-add-to-cart[p_link=\"' + v.link + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n    });\n  }\n\n}\n\nfunction add_traveller_to_cart(item) {\n\n  var travellers = cart.travellers;\n\n  var traveller = {\n    'id': $(item).attr('t_id'),\n    'name': $(item).attr('t_name')\n  };\n\n  var is_traveller_in_cart = _.findLastIndex(travellers, {\n    'id': traveller.id\n  });\n\n  if (is_traveller_in_cart < 0) {\n    travellers.push(traveller);\n\n    $.get('/user/wishlist/travellers/store', traveller);\n  }\n\n  $('[t_id=\"' + traveller.id + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n\n  cart.travellers = travellers;\n\n  // $.jStorage.set('cart', cart);\n\n}\n\nfunction mark_traveller_added() {\n\n  if (cart.travellers.length > 0) {\n    $.each(cart.travellers, function(i, v) {\n      $('.add-traveller-to-list[t_id=\"' + v.id + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n    });\n  }\n\n}\n\nfunction add_buyer_to_cart(item) {\n\n  var buyers = cart.buyers;\n\n  var buyer = {\n    'id': $(item).attr('b_id'),\n    'name': $(item).attr('b_name')\n  };\n\n  var is_buyer_in_cart = _.findLastIndex(buyers, {\n    'id': buyer.id\n  });\n\n  if (is_buyer_in_cart < 0) {\n    buyers.push(buyer);\n\n    $.get('/user/wishlist/buyers/store', buyer);\n  }\n\n  $('[b_id=\"' + buyer.id + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n\n  cart.buyers = buyers;\n  $.jStorage.set('cart', cart);\n\n}\n\nfunction mark_buyer_added() {\n\n  if (cart.buyers.length > 0) {\n    $.each(cart.buyers, function(i, v) {\n      $('.add-buyer-to-list[b_id=\"' + v.id + '\"]').html('<i class=\"fa fa-star fa-2x green-text\"></i> Added to list');\n    });\n  }\n\n}\n\nfunction populate_travellers_at_product_page() {\n\n  if ($('.favorite-traveller-list').length > 0 && cart.travellers.length > 0) {\n\n    $('.favorite-traveller-list').html(\"\");\n    \n    // $.each(cart.travellers, function(i, v) {\n    //     $('.favorite-traveller-list').append('<p><input name=\"traveller[]\" type=\"checkbox\" value=\"' + v.traveler_id + '\"> ' + v.name + '</p>');\n    // });\n    \n    $.each(cart.travellers, function (i, v) {\n      if ($('.favorite-traveller-list input[type=checkbox][value=\"' + v.traveler_id + '\"]').length == 0) {\n      \n      $('.favorite-traveller-list').append('<p><input name=\"traveller[]\" type=\"checkbox\" value=\"' + v.traveler_id + '\"> ' + v.name + '</p>');\n        \n      }\n    });\n    \n  }\n\n}\n\nfunction populate_products_at_traveller_page() {\n\n  if ($('.favorite-product-list').length > 0 && cart.products.length > 0) {\n\n    $('.favorite-product-list').html(\"\");\n\n    var commission_rate = $('.search-result-area').attr('commission_rate'),\n      transaction_rate = $('.search-result-area').attr('transaction_rate');\n\n    $.each(cart.products, function(i, v) {\n\n      var c = new Calculator(v.price, 0);\n\n      $('.favorite-product-list').append('<div class=\"col-xs-12 col-sm-6 push-down-10\"><p class=\"text-left\"><input type=\"checkbox\" class=\"favorite_product\" value=\"' + v.link + '\"> <a href=\"' + v.link + '\" target=\"_blank\" >' + v.name + '</a></p></div> <div class=\"col-xs-12 col-sm-6 push-down-10\"><p class=\"white-text text-right\">Price: <b>USD ' + v.price + '</b> <br> Airposted Commission: <b>USD ' + c.commission_charge + '</b> <br> Transaction Charge: <b>USD ' + parseFloat(c.transaction_charge * 1 + c.fixed_transaction_charge * 1).toFixed(2) + '</b> <br> Total: <b>USD ' + c.total + ' </b></p></div>');\n    });\n  }\n\n}\n\nfunction calculate_charge_at_buyer_search_page(subject) {\n\n  var price = parseFloat($(subject).find('.buyer_price_offer').val()).toFixed(2),\n    traveller_commission = parseFloat($(subject).find('.buyer_commission_offer').val()).toFixed(2),\n    c = new Calculator(price, traveller_commission);\n\n  $(subject).find('.get_offer_price').text(c.price_with_traveler_commission);\n  $(subject).find('.get_transaction_charge').text( parseFloat(c.transaction_charge * 1 + c.fixed_transaction_charge * 1).toFixed(2) );\n  $(subject).find('.get_commission').text(c.commission_charge);\n  $(subject).find('.get_total').text(c.total);\n\n}\n\nfunction level_search_items(){\n  var a = 0;\n  $('.search-result-area .search-item').each(function(){\n  a = $(this).height() > a ? $(this).height() : a;\n  });\n  $('.search-result-area .search-item').height(a);\n}\n\n// function getWishlist(){\n  \n//   if( $('.client-nav-area').length > 0 ){\n    \n//     $.getJSON('/user/wishlist/products').success(function(data) {\n//       cart.products = data;\n//       mark_products_added();\n//     });\n//     $.getJSON('/user/wishlist/buyers').success(function(data) {\n//       cart.buyers = data;\n//       mark_buyer_added();\n//     });\n//     $.getJSON('/user/wishlist/travellers').success(function(data) {\n//       cart.travellers = data;\n//       mark_traveller_added();\n//     });\n    \n//   }\n  \n// }\n\nfunction autoDismissableMessage(){\n  \n  setTimeout(function(){\n    $('.auto-dismissable').hide().remove();\n  }, 3000);\n  \n}\n\nFile.prototype.convertToBase64 = function(callback){\n        var reader = new FileReader();\n        reader.onload = function(e) {\n             callback(e.target.result)\n        };\n        reader.onerror = function(e) {\n             callback(null);\n        };        \n        reader.readAsDataURL(this);\n};\n\nfunction selected_image_to_base64(){\n  \n  if( $(\"#img_for_amazon\").length > 0 ){\n    $(\"#img_for_amazon\").on('change',function(){\n      \n      var holder = $(this).parents('form');\n      \n      holder.find('#amazon_img_preview').attr('src', '');\n      holder.find('#non_amazon_img_preview').attr('src', '');\n      holder.find('[name=image_url]').val('');\n        \n      var selectedFile = this.files[0];\n      selectedFile.convertToBase64(function(data){\n          \n          holder.find('.amazon_preview .message').text('');\n          holder.find('#amazon_img_preview').attr('src', data);\n          holder.find('[name=image_url]').val(data);\n          \n      });\n      \n    });\n  }\n  \n  if( $(\"#img_for_non_amazon\").length > 0 ){\n    $(\"#img_for_non_amazon\").on('change',function(){\n      \n      var holder = $(this).parents('form');\n      \n      holder.find('#non_amazon_img_preview').attr('src', '');\n      holder.find('#amazon_img_preview').attr('src', '');\n      holder.find('[name=image_url]').val('');\n        \n      var selectedFile = this.files[0];\n      selectedFile.convertToBase64(function(data){\n          \n          holder.find('.amazon_preview .message').text('');\n          holder.find('#non_amazon_img_preview').attr('src', data);\n          holder.find('[name=image_url]').val(data);\n          \n      });\n      \n    });\n  }\n  \n  if( $(\"#chat_image\").length > 0 ){\n    $(\"#chat_image\").on('change',function(){\n      \n      $('#chat_image_preview').attr('src', '');\n      var selectedFile = this.files[0];\n      selectedFile.convertToBase64(function(data){\n          \n          $('#chat_image_preview').attr('src', data);\n          \n      });\n      \n    });\n  }\n  \n}\n\nfunction selected_image_to_base64_2(){\n  \n  $(document).on({\n    \n    change: function(){\n      \n      var holder = $(this).parents('.product-picker');\n      \n      holder.find('.amazon_img_preview').attr('src', '');\n      holder.find('[name=\"amazon_image_url[]\"]').val('');\n        \n      var selectedFile = this.files[0];\n      selectedFile.convertToBase64(function(data){\n          \n          holder.find('.amazon_preview .message').text('');\n          holder.find('.amazon_img_preview').attr('src', data);\n          holder.find('[name=\"amazon_image_url[]\"]').val(data);\n          \n      });\n      \n    }\n    \n  }, '.img_for_amazon');\n  \n  \n  $(document).on({\n    \n    change: function(){\n      \n      \n      var holder = $(this).parents('.product-picker');\n      \n      holder.find('.non_amazon_img_preview').attr('src', '');\n      holder.find('[name=\"non_amazon_image_url[]\"]').val('');\n        \n      var selectedFile = this.files[0];\n      selectedFile.convertToBase64(function(data){\n          \n          holder.find('.amazon_preview .message').text('');\n          holder.find('.non_amazon_img_preview').attr('src', data);\n          holder.find('[name=\"non_amazon_image_url[]\"]').val(data);\n          \n      });\n      \n    }\n    \n  }, '.img_for_non_amazon');\n  \n  \n}\n\n// For single product\nfunction get_img_from_amazon(){\n  \n  if( $('#fetch_from_amazon').length > 0 ){\n    \n    $('#fetch_from_amazon, [name=amazon_url]').on('click keyup',function(){\n    \n      var holder  = $(this).parents('.product-picker');\n          \n          /** For AWS US **/\n      var input_url = holder.find('[name=amazon_url]').val();\n      \n      if( input_url.length > 5 ){\n        \n            /** For AWS US **/\n        var url = ( input_url.length > 5 ) ? input_url.split('/dp/') : [];\n            \n            url = ( url.length > 1 ) ? url[1].split('/')[0] : [];\n            /** END : For AWS US **/\n    \n            /** For AWS UK (if pattern does not match AWS US product link) **/\n            url = ( url.length > 0 ) ? url : input_url.split('/gp/product/');\n    \n            url = ( url.length > 1 && typeof(url) == 'object' ) ? url[1].split('/')[0] : url;\n            /** For AWS UK **/\n        \n        if( url.length > 0 ){\n          holder.find('.amazon_preview .message').text('Fetching image from Amazon');\n          holder.find('#amazon_img_preview').attr('src', '');\n          holder.find('#non_amazon_img_preview').attr('src', '');\n          holder.find('[name=image_url]').val('');\n          \n          $.get('/user/fetch-image-from-url/' + url, function (data) {\n                \n              holder.find('.amazon_preview .message').text('');\n              holder.find('#amazon_img_preview').attr('src', data.thumb);\n              holder.find('[name=image_url]').val(data.thumb);\n              holder.find('[name=p_length]').val(data.Length);\n              holder.find('[name=p_width]').val(data.Width);\n              holder.find('[name=p_height]').val(data.Height);\n              holder.find('[name=p_weight]').val(data.Weight * 1 / 1000);\n              holder.find('[name=price]').val(data.price * 1 / 100);\n        \n          });\n          \n        } else{\n          holder.find('.amazon_preview .message').text('Enter product url');\n        }\n        \n      }\n      \n    });\n  \n  }\n  \n}\n\n// For multiple products\nfunction get_img_from_amazon2(){\n  \n  $(document).on({\n    \n    'click keyup': function(){\n      \n      var holder  = $(this).parents('.product-picker');\n          \n          /** For AWS US **/\n      var input_url = holder.find('[name=\"amazon_url[]\"]').val();\n      \n      if( input_url.length > 5 ){\n        \n            /** For AWS US **/\n        var url = ( input_url.length > 5 ) ? input_url.split('/dp/') : [];\n            \n            url = ( url.length > 1 ) ? url[1].split('/')[0] : [];\n            /** END : For AWS US **/\n    \n            /** For AWS UK (if pattern does not match AWS US product link) **/\n            url = ( url.length > 0 ) ? url : input_url.split('/gp/product/');\n    \n            url = ( url.length > 1 && typeof(url) == 'object' ) ? url[1].split('/')[0] : url;\n            /** For AWS UK **/\n        \n        if( url.length > 0 ){\n          holder.find('.amazon_preview .message').text('Fetching image from Amazon');\n          holder.find('.amazon_img_preview').attr('src', '');\n          holder.find('[name=\"amazon_image_url[]\"]').val('');\n          \n          $.get('/user/fetch-image-from-url/' + url, function (data) {\n              \n              holder.find('.amazon_preview .message').text('');\n              holder.find('.amazon_img_preview').attr('src', data.thumb);\n              holder.find('[name=\"amazon_name[]\"]').val(data.title);\n              holder.find('[name=\"amazon_url[]\"]').val(data.link.length > 10 ? data.link : holder.find('[name=\"amazon_url[]\"]').val() );\n              holder.find('[name=\"amazon_image_url[]\"]').val(data.thumb);\n              holder.find('[name=\"amazon_price[]\"]').val(data.price*1/100);\n              \n              holder.find('[name=\"amazon_height[]\"]').val(data.Height);\n              holder.find('[name=\"amazon_width[]\"]').val(data.Width);\n              holder.find('[name=\"amazon_length[]\"]').val(data.Length);\n              holder.find('[name=\"amazon_weight[]\"]').val(data.Weight);\n              \n              holder.find('[name=\"amazon_height[]\"], [name=\"amazon_width[]\"], [name=\"amazon_length[]\"], [name=\"amazon_height[]\"]').attr({'class': 'form-control select2'}).next('span').remove();\n              holder.find('[name=\"amazon_height[]\"], [name=\"amazon_width[]\"], [name=\"amazon_length[]\"], [name=\"amazon_weight[]\"]').select2();\n              \n          });\n          \n        } else{\n          holder.find('.amazon_preview .message').text('Enter product url');\n        }\n        \n      }\n      \n    }\n    \n  }, '.fetch_from_amazon, [name=\"amazon_url[]\"]');\n    \n}\n\nfunction get_cities_on_country_select(){\n  \n  if( $('.get_cities').length > 0 ){\n    \n    $('.get_cities').on('click keyup change', function(e){\n\n      $('[name=city_id]').html('<option>Select the city where you want to receive the product</option>');\n      \n      $.getJSON('/user/fetch-cities-for-country/'+ $('.get_cities option:selected').val(), function(data){\n        \n          $.each( data , function(k,v){\n            \n            $('[name=city_id]').append('<option value=\"'+k+'\">'+v+'</option>');\n            \n          });\n        \n      });\n      \n    });\n    \n  }\n  \n  if( $('[get_cities]').length > 0 ){\n    \n    $('[get_cities]').on('click keyup change', function(e){\n      \n      var country = $(this).find('option:selected').val();\n      \n      var city_list_holder = $('[city_list=\"'+$(this).attr('get_cities')+'\"]');\n      \n      city_list_holder.html('<option>Select the city</option>');\n      \n      $.getJSON('/user/fetch-cities-for-country/'+ country, function(data){\n        \n          $.each( data , function(k,v){\n            \n            city_list_holder.append('<option value=\"'+k+'\">'+v+'</option>');\n            \n          });\n        \n      });\n      \n    });\n    \n  }\n  \n}\n\nfunction lazyload(){\n    \n    if( $('[data-src]').length > 0 ){\n      \n      setTimeout(function(){\n        \n        $('[data-src]').each(function(){\n            \n            $(this).attr('src', $(this).attr('data-src') ).removeAttr('data-src');\n            \n        });\n        \n      }, 5000);\n        \n    }\n    \n}\n\n/* CHAT */\n\nfunction contact_display_order(){\n  \n  var list = [];\n  \n  $('.users .contact').each(function(i,v){\n    \n    var contact = $(this),\n        chat    = $('#'+contact.attr('message')).find('[at]:last-child').attr('at'),\n        offer   = $('#'+contact.attr('offer')).find('[at]:first-child').attr('at'),\n        chat    = ( chat == undefined ) ? '2015-01-01 10:00:00' : chat,\n        offer   = ( offer == undefined ) ? '2015-01-01 10:00:00' : offer,\n        latest  = ( new Date(chat.replace(' ', 'T')) > new Date(offer.replace(' ', 'T')) ) ? chat : offer;\n        contact.attr('at', latest);\n        list.push(latest);\n    \n  });\n  \n  list = list.sort().reverse();\n  \n  var data = '';\n  \n  list.forEach(function(v){\n    \n    var a = $('.users .contact[at=\"'+v+'\"]').parent().html();\n    \n    if( a != undefined ) data += '<li>'+a+'</li>';\n  });\n  \n  $('.users ul').html(data);\n  \n}\n\nfunction reset_chat(){\n  chat = {\n    contact: {},\n    message: {},\n    offer: {}\n  };\n}\n\nfunction chat_init(){\n    \n  \n  $(document).on({\n    \n    click: function(e){\n      \n      e.preventDefault();\n      reset_chat();\n      \n      var subject = $(this);\n      \n      chat.contact.id = subject.attr('id');\n      chat.message.id = subject.attr('message');\n      chat.offer.id = subject.attr('offer');\n          \n      $('.msg-list, .offer-list, .users li').removeClass('active');\n      \n      subject.parent().addClass('active');\n      $('#'+chat.message.id+ ', #'+chat.offer.id).addClass('active');\n      \n      setTimeout(function(){\n\n        $('#'+chat.message.id).animate({\n          scrollTop: $('#'+chat.message.id)[0].scrollHeight\n        }, 100); // -1 is the animation duration\n\n      }, 500);\n      \n      /**\n       * Mark Chat as read\n      */\n      \n      if( subject.hasClass('unread') ){\n        \n        $.get('/user/chat-with/'+ chat.contact.id.split('-')[2] +'/is-read');\n        \n        subject.removeClass('unread');\n        \n      }\n      \n      setTimeout(function() { \n          \n        $('.xs-maximize-inbox .counter').text(0); \n        subject.find('.count-chat').text(0);\n        \n      }, 5000);\n      \n      /**\n       * END : Mark Chat as read\n      */\n      \n      /**\n       * @small screen, toggle inbox/offer window\n      */\n      \n      if( $(window).width() < 600 ){\n        $('.users ul').removeClass('maximized').addClass('minimized');\n        $('.inbox').removeClass('minimized').addClass('maximized');\n        $('.offers').removeClass('maximized').addClass('minimized');\n        \n        $('.xs-maximize-inbox').addClass('active').find('.counter').text( subject.find('.count-chat').text() );\n        $('.xs-user-toggler, .xs-maximize-offers').removeClass('active');\n        $('.xs-maximize-offers .counter').text( subject.find('.count-offer').text() );\n        \n        subject.parent().parent().removeClass('maximized').addClass('minimized').animate({\n          scrollTop : subject.parent().position().top + 50\n        }, 400, function(){\n          \n          $('html, body').animate({\n            scrollTop: $('.xs-offer-inbox-toggler').offset().top\n          }, 1000);\n          \n        });\n\n      }\n    \n    }\n      \n  }, '.offer-inbox .contact');\n  \n  \n  $('#msg').keypress(function(e){\n    \n    var keycode = (e.keyCode ? e.keyCode : e.which);\n  \tif(keycode == '13' && $('#send-on-enter').is(':checked') && $(this).val().length > 0 && chat.message.id != undefined){\n  \t\t\n  \t\te.preventDefault();\n  \t\t\n  \t\tchat_store();\n  \t\t\n  \t}\n    \n  });\n  \n  \n  $('#post-message').click(function(e){\n    \n    e.preventDefault();\n    \n    chat_store();\n    \n  });\n  \n  \n}\n\nfunction chat_refresh(){\n  \n  var chat_refresh_in_progress = 0, offer_refresh_in_progress = 0, contact_refresh_in_progress = 0;\n  \n  // update chats\n  setInterval(function(){\n      \n    if( $('.msg-list.active').length > 0 && $.active < 5 && chat_refresh_in_progress == 0){\n      \n      chat_refresh_in_progress = 1;\n    \n      $('.msg-list.active').each(function(i,v){\n              \n        var list    = $(this),\n            at      = $(this).find('[at]:last-child'),\n            time    = at.length > 0 ? at.attr('at') : '2016-11-30 23:59:59',\n            contact = $(this).attr('id').split('-')[2],\n            user    = '#contact-id-'+contact;\n          \n          $.get('/user/chats/inbox/update/'+contact+'/'+encodeURI(time), function(data){\n            \n            if(data.length > 10){\n              \n              var unreads = $(data).find('.time').length;\n\n              list.find('.no-message, .loading').remove();\n              \n              list.append(data);\n              \n              setTimeout(function(){\n                \n                $(list).animate({\n                  scrollTop: $(list)[0].scrollHeight\n                }, 100); // -1 is the animation duration\n                \n              },700);\n              \n              if( ! $('.xs-maximize-inbox').hasClass('active') && unreads > 0 && $(window).width() < 800 ){\n                \n                var total_unreads = $(user).addClass('unread').find('.count-chat').text() * 1 + unreads * 1;\n                \n                $(user).addClass('unread').find('.count-chat').text( total_unreads );\n                $('.xs-maximize-inbox .counter').text( total_unreads );\n                \n              }\n              \n            }\n            \n            if(list.children('li').length == 0){\n              \n              list.html('\\\n              <span class=\"no-message text-center\">\\\n                  <img src=\"/public/img/settings/no-message.png\" alt=\"No Messages yet\">\\\n                  <h3>You haven\\'t said Hi yet!</h3>\\\n                  <p>Start a conversation below.</p>\\\n              </span>\\\n              ');\n              \n            }\n            \n            chat_refresh_in_progress = 0;\n            \n          });\n      \n      });\n    \n    }\n    \n  }, 1500);\n  \n  // update offers\n  setInterval(function(){\n      \n    if( $('.offer-list.active').length > 0 && $.active < 5 && offer_refresh_in_progress == 0){\n      \n      offer_refresh_in_progress = 1;\n    \n      $('.offer-list.active').each(function(i,v){\n              \n        var list    = $(this),\n            at      = $(this).find('[at]:first-child'),\n            time    = at.length > 0 ? at.attr('at') : '2016-11-30 23:59:59',\n            contact = $(this).attr('id').split('-')[2],\n            user    = '#contact-id-'+contact;\n            \n          $.get('/user/chats/offer/update/'+contact+'/'+encodeURI(time), function(data){\n            \n            list.find('.loading').remove();\n            \n            if( data.length > 10 && time != $(_.first($(data)).outerHTML).attr('at') ){\n              \n              var pending_offers = $(data).find('.btn:contains(\"Counter\")').length;\n              \n              list.html(data)\n                  .find('[data-toggle=\"popover\"]').popover({'html': true})\n                  .find('[tooltip]').tooltip();\n                  \n              if( ! list.hasClass('active') ){\n                \n                $(user).addClass('unread').find('.count-offer').text( pending_offers );\n                $('.xs-maximize-offers .counter').text( pending_offers );\n                \n              }\n              \n            }\n            \n            offer_refresh_in_progress = 0;\n            \n          });\n      \n      });\n    \n    }\n    \n  }, 6000);\n  \n  // update user list and counter\n  setInterval(function(){\n    \n    if( $('.offer-inbox .users').length > 0 && $.active < 5 && contact_refresh_in_progress == 0 ){\n    \n      contact_refresh_in_progress = 1;\n      var total_unread_chats = 0, total_pending_offers = 0;\n      \n      $.get('/user/chats/contact-update', function(data){\n        \n        if(data.length > 0){\n          \n          $(data).find('.contact').each(function(){\n            \n            var old = $('#'+$(this).attr('id')),\n                cur = $(this);\n                \n            total_unread_chats = total_unread_chats * 1 + cur.find('.count-chat').text() * 1;\n            total_pending_offers = total_pending_offers * 1 + cur.find('.count-offer').text() * 1;\n            \n            if( old.length > 0 ){\n              \n              old.find('.count-chat').text( cur.find('.count-chat').text() );\n              old.find('.count-offer').text( cur.find('.count-offer').text() );\n              \n            } else{\n              \n              $('.users ul.maximized').append('<li>'+cur.parent().html()+'</li>').find('[data-src]').each(function(){\n                $(this).attr({ 'src' : $(this).attr('data-src') });\n              });\n              \n              $('.inbox .list').append('\\\n              <ul class=\"msg-list\" id=\"'+cur.attr(\"message\")+'\" >\\\n                  <p class=\"loading push-20\"><i class=\"fa fa-spinner fa-spin\"></i></p>\\\n              </ul>\\\n              ');\n              \n              $('.offers .list').append('\\\n              <ul class=\"offer-list\" id=\"'+cur.attr(\"offer\")+'\">\\\n                  <p class=\"loading push-20\"><i class=\"fa fa-spinner fa-spin\"></i></p>\\\n              </ul>\\\n              ');\n              \n            }\n            \n          });\n          \n        }\n        \n        $('.counter-icon').text(total_unread_chats +'/'+ total_pending_offers);\n        contact_refresh_in_progress = 0;\n        \n      });\n    \n    }\n    \n  }, 12000);\n  \n}\n\nfunction chat_store(){\n  \n  var msg_data = $('#msg_form').serialize();\n          \t\n\tvar id = chat.contact.id.split('-')[2];\n\t\n\t$('#msg').val('');\n\t\n\t$.post( '/user/chats/store/'+id, msg_data, function(data){});\n  \n  \n}\n\nfunction chat_store_image(){\n  \n  $('#msg_img_form').submit(function(e){\n    \n    e.preventDefault();\n    \n    $('.image-container .message').text('');\n    \n    if(chat.contact.id != undefined){\n      \n      var msg_data  = $('#msg_img_form').serialize();\n      var id        = chat.contact.id.split('-')[2];\n      var formdata  = new FormData(this);\n      $('.image-container .message').text('Uploading image to conversation...');\n  \n      $.ajax({\n          url: '/user/chats/store/'+id,\n          type: \"POST\",\n          data: formdata,\n          mimeTypes:\"multipart/form-data\",\n          contentType: false,\n          cache: false,\n          processData: false,\n          success: function(data){\n              if(data * 1 == 1){\n                $('.image-container .message').text('Image has been uploaded to your conversation.');\n                $('#msg_img_form').parents('.modal').modal('hide');\n                $('.image-container .message').text(' ');\n              }\n          },\n          error: function(){\n              if(data * 1 == 1){\n                $('.image-container .message').text('Failed! Please retry.');\n              }\n          }\n       });\n      \n    } else{\n      \n      $('.image-container .message').text('Please select a contact to start conversation.');\n      \n    }\n    \n  });\n  \n}\n\nfunction toggle_inbox_offers(){\n  \n  $('.toggle-inbox').click(function(e){\n    \n    e.preventDefault();\n    \n    $('.toggle-inbox').toggleClass('active');\n    $('.inbox').toggleClass('minimize');\n    \n  });\n  \n  $('.toggle-offers').click(function(e){\n    \n    e.preventDefault();\n    \n    $('.toggle-offers').toggleClass('active');\n    $('.offers').toggleClass('minimize');\n    \n  });\n  \n}\n\nfunction mark_user_chat_read(){\n  \n  var a = $('.users li.active a');\n  \n  if(a.length > 0){\n    \n    var count  = $('.counter-icon').first().text(),\n        deduct = a.find('.count-chat').text() * 1;\n    \n    a.find('.count-chat').text(0);\n    \n    $('.xs-maximize-inbox .counter').text(0);\n    \n    $('.counter-icon').text( (count.split('/')[0] * 1 - deduct) +'/'+ count.split('/')[1] * 1 );\n    \n    $.get('/user/chat-with/'+a.attr('id').split('-')[2]+'/is-read');\n    \n  }\n  \n}\n\nfunction maximize_inbox(e) {\n  e.preventDefault();\n  \n  $(this).find('.counter').text(0);\n  $('.users li.active .count-chat').text(0);\n  \n  $('.inbox').removeClass('minimized').addClass('maximized');\n  $('.offers').removeClass('maximized').addClass('minimized');\n  \n  \n  $('.xs-maximize-inbox').addClass('active');\n  $('.xs-user-toggler, .xs-maximize-offers').removeClass('active');\n  \n}\n\nfunction maximize_offer(e) {\n  e.preventDefault();\n  \n  $('.offers').removeClass('minimized').addClass('maximized');\n  $('.inbox').removeClass('maximized').addClass('minimized');\n  \n  $('.xs-maximize-offers').addClass('active');\n  $('.xs-user-toggler, .xs-maximize-inbox').removeClass('active');\n  \n}\n\n/* END : CHAT */\n\nfunction update_profile_img(){\n  \n  $('#update-profile-image').submit(function(e){\n    \n    e.preventDefault();\n    \n    $('.image-container .message').text('Uploading...');\n    \n    var url       = $(this).attr('action');\n    var formdata  = new FormData(this);\n\n    $.ajax({\n        url: url,\n        type: \"POST\",\n        data: formdata,\n        mimeTypes:\"multipart/form-data\",\n        contentType: false,\n        cache: false,\n        processData: false,\n        success: function(data){\n            if(data * 1 == 1){\n              \n              $('.image-container .message').text('Success !. Reloading the page.');\n              \n              window.location.href = window.location.href;\n              window.location.reload();\n              \n            }\n        },\n        error: function(){\n            if(data * 1 == 1){\n              $('.image-container .message').text('Failed! Please retry.');\n            }\n        }\n     });\n    \n  \n  });\n  \n}\n\nfunction send_message_from_search(){\n  \n  if( $('.send-message').length > 0 ){\n    \n    $('.send-message').submit(function(e){\n      \n      e.preventDefault();\n      \n      var form  = $(this),\n          url   = form.attr('action'),\n          data  = form.serialize();\n          \n      form.find('.message').text('Sending...');\n      \n      $.post(url, data, function(returned_data){\n        \n        if( returned_data * 1 == 1 ){\n          \n          form.find('.message').text('');\n          \n          form.find('.send-message-heading, .send-message-details').addClass('hidden');\n          \n          form.find('.message-success').removeClass('hidden');\n          \n          setTimeout(function(){\n            \n            form.find('.send-message-heading, .send-message-details').removeClass('hidden');\n            \n            form.find('.message-success').addClass('hidden');\n            \n          }, 10000);\n          \n        } else{\n          \n          form.find('.message').text('Please type in something and send again.');\n          \n        }\n        \n      });\n      \n    });\n    \n  }\n  \n}\n\nfunction make_price_calculation_visible_on_post(){\n  \n  if( $('.price_area .price').length > 0 ){\n  \n    $('.price_area .price').on('keyup', function(){\n    \n    if($(this).val().length > 0){\n    \n      $('.price_summary').css({\n        'opacity': 1,\n        'height': 'auto',\n        'display': 'block',\n      });\n      \n    } else{\n      \n      $('.price_summary').css({\n        'opacity': 0,\n        'height': 0,\n        'display': 'none',\n      });\n      \n    }\n      \n  });\n  \n  }\n  \n}\n\nfunction tourguide_balance(s){\n  \n  var t = $( $(s).attr('target'));\n  \n  $('html, body').animate({ scrollTop: t.offset().top - ( $(s).height() + 70 ) }, 700, function(){\n    \n    $('.tour-focus').css({\n      'border-left-width' : ( t.offset().left * 1 - 10 ) + 'px',\n      'border-top-width' : (t.offset().top * 1 - 10 ) + 'px',\n      'border-bottom-width' : $(document).height() - ( t.offset().top + t.height() ) + 'px',\n      'border-right-width' : $(window).width() + 'px',\n      'padding-top' : t.height() + 20 + 'px',\n      'padding-right': t.width() + 30 + 'px'\n    });\n    \n    $(s).css({\n      'top': t.offset().top - ( $(s).height() + 40 ) + 'px',\n      'left': t.offset().left + 'px',\n      'max-width': ( $(window).width() < 400 ) ? 275 + 'px' : 400 + 'px',\n    });\n    \n    $( '.tour-focus, '+s ).show();\n    \n  });\n  \n}\n\nfunction tourguide_init(){\n  \n  if( ($('.buyer-tour').length > 0 && $.jStorage.get('buyer_search_tour') != 1) || ($('.traveler-tour').length > 0 && $.jStorage.get('traveler_search_tour') != 1) ){\n    \n    tourguide_balance( '#guide-1' );\n    \n    $('.guide .next-slide, .guide .prev-slide').click(function(e){\n    \n      e.preventDefault();\n      \n      $(this).parents('.guide').hide();\n      \n      if( $(this).attr('href').length > 1 ){\n      \n        tourguide_balance( $(this).attr('href') );\n      \n      } else{\n        \n        $('.tour-focus').hide();\n        \n      }\n      \n    });\n    \n    if( $('.buyer-tour').length > 0 ){\n      $.jStorage.set('buyer_search_tour', 1);\n    } else if( $('.traveler-tour').length > 0 ){\n      $.jStorage.set('traveler_search_tour', 1);\n    }\n    \n  }\n  \n}\n\nfunction select_box(e){\n  \n  $('.box-option').removeClass('active');\n  \n  $(this).addClass('active');\n  \n}\n\nfunction calculate_order_cost(){\n  \n\n  $('.summary-products').empty();\n  \n  var product_total = 0, shipping_total = 0, transaction_charge = 0, invoice_total = 0, box_height = 0, box_width = 0, box_length = 0, box_capacity = 0;\n  \n  $('.product-picker').each(function(i,v){\n    \n    var item = $(this),\n        name = item.find('[name$=\"_name[]\"]').val() ,\n        price_per_unit = item.find('[name$=\"_price[]\"]').val() * 1,\n        quantity = item.find('[name$=\"_quantity[]\"] option:selected').val() * 1,\n        total = Math.round( price_per_unit * quantity ),\n        weight = item.find('[name$=\"_weight[]\"] option:selected').val() * 1,\n        height = item.find('[name$=\"_height[]\"] option:selected').val() * 1,\n        width = item.find('[name$=\"_width[]\"] option:selected').val() * 1,\n        length = item.find('[name$=\"_length[]\"] option:selected').val() * 1,\n        img = item.find('[name$=\"_image_url[]\"]').val();\n        \n        product_total += (price_per_unit * quantity);\n        invoice_total += product_total + shipping_total;\n        box_height += Math.round( height * quantity );\n        box_width += Math.round( width * quantity );\n        box_length += Math.round( length * quantity );\n        box_capacity += Math.round( weight * quantity );\n    \n    $('.summary-products').append('\\\n        \\\n        <li>\\\n            <span class=\"cart-summary-img\">\\\n                <img src=\"'+img+'\" class=\"img-responsive\"></img>\\\n            </span>\\\n            \\\n            <span class=\"row\">\\\n                <div class=\"no-margin\">'+name+': <span class=\"pull-right\">$'+ price_per_unit +' * '+ quantity +' = $'+ total +'</span></div>\\\n                <div class=\"no-margin\">Size: <span class=\"pull-right\">'+length+' * '+width+' * '+height+' Inches * '+quantity+'</span></div>\\\n                <div class=\"no-margin\">Weight: <span class=\"pull-right\">'+weight/1000+' KG * '+quantity+'</span></div>\\\n            </span>\\\n        </li>\\\n        \\\n    ');\n    \n  });\n  \n  \n  \n  $('[name=box_height]').val( Math.round( box_height ) );\n  $('[name=box_width]').val( Math.round( box_width ) );\n  $('[name=box_length]').val( Math.round( box_length ) );\n  $('[name=box_weight]').val( Math.round( box_capacity ) );\n  \n  $('.box-height').text( Math.round( box_height ) + ' Inches');\n  $('.box-width').text( Math.round( box_width ) + ' Inches');\n  $('.box-length').text( Math.round( box_length ) + ' Inches');\n  $('.box-capacity').text( Math.round( box_capacity )/1000 + ' KG');\n  \n  $('.total-product-cost').text('$'+ Math.round( product_total ));\n  $('.total-shipping').text('$'+ Math.round( shipping_total ));\n  $('.total-invoice').text('$'+ Math.round( invoice_total ));\n  \n  $.post('/user/pitneybowes-rates', $('.product-picker').parents('form').serializeArray(), function(data){\n    \n    if( ! isNaN(data * 1)){\n\n      $total_charge = Math.round( data * 1 );\n      invoice_total  = Math.round( product_total * 1 + $total_charge * 1 );\n      \n    }\n    \n    $('.total-product-cost').text('$'+ Math.round( product_total ) ); \n    $('.total-shipping').text('$'+$total_charge);\n    $('.total-invoice').text('$'+invoice_total);\n    \n  } );\n  \n}\n\nfunction order_form_toggler(){\n  \n  // Next to Billing\n  $('.next-to-shipping').click(function(e){\n    e.preventDefault();\n    \n    var required_fields_filled = true;\n    \n    $('.order-holder [required]').each(function(i,v){\n      if( $(this).val().length == 0 ) required_fields_filled = false;\n    });\n    \n    if( required_fields_filled ){\n      \n      $('.message.alert').text('');\n      $('.order-holder').addClass('hidden');\n      $('.shipping-holder').removeClass('hidden');\n      $('.breads span:eq(0)').removeClass('boldest');\n      $('.breads span:eq(1)').addClass('boldest');\n      \n    } else{\n      \n      $('.message.alert').text('Please fill all required fields to continue.');\n      \n    }\n    \n    \n  });\n  \n  // Back to Shopping\n  $('.back-to-shopping').click(function(e){\n    e.preventDefault();\n    $('.order-holder').removeClass('hidden');\n    $('.shipping-holder').addClass('hidden');\n    $('.breads span:eq(1)').removeClass('boldest');\n    $('.breads span:eq(0)').addClass('boldest');\n  });\n  \n  \n  // Next to summary\n  $('.next-to-summary').click(function(e){\n    e.preventDefault();\n    \n    var required_fields_filled = true;\n    \n    $('.shipping-holder [required]').each(function(i,v){\n      if( $(this).val().length == 0 ) required_fields_filled = false;\n    });\n    \n    if( required_fields_filled ){\n      \n      calculate_order_cost();\n      \n      $('.message.alert').text('');\n      $('.shipping-holder').addClass('hidden');\n      $('.rate-holder').removeClass('hidden');\n      $('.breads span:eq(1)').removeClass('boldest');\n      $('.breads span:eq(2)').addClass('boldest');\n      \n    } else{\n      \n      $('.message.alert').text('Please fill all required fields to continue.');\n      \n    }\n    \n  });\n  \n  // Back to Shipping\n  $('.back-to-shipping').click(function(e){\n    e.preventDefault();\n    $('.shipping-holder').removeClass('hidden');\n    $('.rate-holder').addClass('hidden');\n    $('.breads span:eq(2)').removeClass('boldest');\n    $('.breads span:eq(1)').addClass('boldest');\n  });\n  \n}\n\nfunction increment_shipping_label_product(){\n  \n  if( $('.shipping-label-item').length > 0 ){\n    \n    shipping_label_product = '<div class=\"row shipping-label-item\">'+ $('.shipping-label-item').first().html() +'</div>';\n  \n    $('.increment-shipping-label-item').click(function(e){\n      e.preventDefault();\n      $('.shipping-label-item:last-child').after(shipping_label_product);\n      $('.shipping-label-item:gt(0) .del-label-item').removeClass('hidden');\n    });\n    \n    $(document).on({\n      click: function(e){\n        e.preventDefault();\n        $(this).parents('.shipping-label-item').remove();\n      }\n    }, '.del-label-item');\n    \n  }\n  \n}\n\nfunction copycat(){\n  \n  $('.shipping-holder input, .shipping-holder select').on('click keyup change', function(e){\n    \n    if($('#copycat').is(':checked')){\n      \n      $('input[name=\"receiver_name\"]').val( $('input[name=\"sender_name\"]').val() );\n      $('input[name=\"receiver_phone\"]').val( $('input[name=\"sender_phone\"]').val() );\n      $('input[name=\"receiver_email\"]').val( $('input[name=\"sender_email\"]').val() );\n      $('input[name=\"receiver_address\"]').val( $('input[name=\"sender_address\"]').val() );\n      $('input[name=\"receiver_state\"]').val( $('input[name=\"sender_state\"]').val() );\n      $('input[name=\"receiver_postcode\"]').val( $('input[name=\"sender_postcode\"]').val() );\n      \n      $('select[name=\"receiver_country_id\"], select[name=\"receiver_city_id\"]').removeClass('select2-hidden-accessible').next('span').remove();\n      $('select[name=\"receiver_country_id\"] option, select[name=\"receiver_city_id\"] option').removeAttr('selected');\n      \n      $('select[name=\"receiver_country_id\"]').val( $('select[name=\"sender_country_id\"]').val() );\n      \n      $('select[name=\"receiver_city_id\"]').html('<option selected value=\"'+$('select[name=\"sender_city_id\"]').val()+'\" >'+$('select[name=\"sender_city_id\"] option:selected').text()+'</option>');\n      \n      $('select[name=\"receiver_country_id\"], select[name=\"receiver_city_id\"]').select2();\n      \n    }\n    \n  });\n  \n}\n\nfunction toggle_collapse_icon(){\n  \n  $('.btn').click(function(e){ \n    $(this).find('.fa-plus, .fa-minus').toggleClass('fa-plus').toggleClass('fa-minus') \n    $(this).find('.fa-angle-right, .fa-angle-down').toggleClass('fa-angle-right').toggleClass('fa-angle-down') \n  });\n  \n}\n\nfunction balance_height(){\n  \n  $('[balance-height]').each(function(i,v){ \n    \n    var attr = $(this).attr('balance-height'),\n        height = $(this).height();\n    \n    $('[balance-height=\"'+attr+'\"]').each(function(){ height = $(this).height() > height ? $(this).height() : height; })\n  \n    $('[balance-height=\"'+attr+'\"]').height(height);\n  \n  });\n  \n}\n\nfunction min_value_constraint(){\n  \n  $('input[min]').on('change focusout', function(){\n    \n    $(this).val( $(this).val() * 1 < $(this).attr('min') * 1 || isNaN( $(this).val() * 1 ) ? $(this).attr('min') : $(this).val());\n    \n  })\n  \n}\n\n// function load_message(e) {\n//   e.preventDefault();\n//   var subject = $(this);\n\n//   $('.message-details').html('Loading message...').load($(this).attr('get-message'), function() {\n//     subject.parents('ul').children('li').removeClass('active');\n//     subject.parent().addClass('active');\n//     subject.removeClass('unread');\n//   });\n// }\n\n\n$(document).ready(function() {\n  \n  level_search_items();\n\n  // getWishlist();\n  \n  autoDismissableMessage();\n  \n  get_img_from_amazon();\n  \n  get_img_from_amazon2();\n  \n  selected_image_to_base64();\n  \n  selected_image_to_base64_2();\n  \n  get_cities_on_country_select();\n  \n  lazyload();\n  \n  chat_init();\n  \n  chat_store_image();\n  \n  toggle_inbox_offers();\n  \n  update_profile_img();\n  \n  send_message_from_search();\n  \n  make_price_calculation_visible_on_post();\n  \n  order_form_toggler();\n  \n  increment_shipping_label_product();\n  \n  copycat();\n  \n  toggle_collapse_icon();\n  \n  min_value_constraint();\n  \n  $('.nicescroll, .scrollable').each(function(){ $(this).niceScroll({ cursorwidth: '10px' }); });\n  \n  if( $(window).width() > 600 ){\n    \n    $('.users ul').niceScroll();\n    \n  } else{\n    \n    $('.xs-window-height').height( $(window).height() );\n    \n    $('.inbox').height( $(window).height() - 30 );\n    $('.offers').height( $(window).height() - 40 );\n    \n  }\n  \n  $('.xs-user-toggler').click(function(e){\n    e.preventDefault();\n    $('.users .minimized, .users .maximized').toggleClass('minimized maximized');\n    \n    \n    $('.xs-user-toggler').addClass('active');\n    $('.xs-maximize-offers, .xs-maximize-inbox').removeClass('active');\n    \n  });\n  \n  $('.users [traveler-href]').click(function(){ window.location.href = $(this).attr('traveler-href'); });\n\n  $('.client-nav-area li:has(\\'a[href=\"' + window.location.href + '\"]\\')').addClass('active');\n  \n  $(\".slick\").each(function(i){ $(this).slick(JSON.parse($(this).attr('slick-options'))); });\n\n  if ($('.select2').length > 0) { $('.select2').select2(); }\n\n  if ($('.airport-search').length > 0) {\n    $('.airport-search').select2({\n      ajax: {\n        url: function(params) {\n          return '/airport-search/' + params.term;\n        },\n        dataType: 'json',\n        delay: 250,\n        processResults: function(data) {\n          return {\n            results: data\n          };\n        }\n      }\n    });\n  }\n  \n  $('#amazon_url').focusin(function(){ $('#other_url').css({'opacity': 0.3}) })\n                  .focusout(function(){ $('#other_url').css({'opacity': 1}) });\n  \n  $('#other_url').focusin(function(){ $('#amazon_url').css({'opacity': 0.3}) })\n                  .focusout(function(){ $('#amazon_url').css({'opacity': 1}) });\n  \n  if( $('.amazon-holder').length > 0 )\n  {\n    \n    amazon_form = '<section class=\"row amazon-holder product-picker\">' +$('.amazon-holder').html() +'</section>';\n    elsewhere_form = '<section class=\"row other-source-holder product-picker\">'+ $('.other-source-holder').html() +'</section>';\n    \n    $('.amazon-holder, .other-source-holder').remove();\n    \n  }\n  \n  // $('[get-message]').click(load_message);\n\n  if ($('.buyer_commission_offer').length > 0) {\n\n    $('.buyer_commission_offer').each(function() {\n\n      calculate_charge_at_buyer_search_page($(this).parent());\n\n    });\n\n  }\n  \n  $('.box-option').click(select_box);\n  \n  $('.gateway-option').click(function(){\n    \n    $('.gateway-option').removeClass('active');\n    $(this).addClass('active');\n    \n  });\n  \n  $('.xs-maximize-inbox').click(maximize_inbox);\n  \n  $('.xs-maximize-offers').click(maximize_offer);\n\n  $(document).on({\n    click: function(e) {\n      $('#reply_modal').modal();\n    }\n  }, '[data-target=\"#reply_modal\"]');\n\n  // $(document).on({\n\n  //   click: function(e) {\n\n  //     e.preventDefault();\n\n  //     add_to_cart($(this));\n\n  //   }\n\n  // }, '.self-add-to-cart');\n\n  // $(document).on({\n\n  //   click: function(e) {\n\n  //     e.preventDefault();\n\n  //     remove_from_cart($(this).parents('[p_id]').attr('p_id'));\n\n  //   }\n\n  // }, '.remove-from-cart');\n\n  // $(document).on({\n  //   click: function(e) {\n  //     e.preventDefault();\n\n  //     add_traveller_to_cart($(this));\n  //   }\n  // }, '.add-traveller-to-list');\n\n  // $(document).on({\n  //   click: function(e) {\n  //     e.preventDefault();\n\n  //     add_buyer_to_cart($(this));\n  //   }\n  // }, '.add-buyer-to-list');\n\n  // $(document).on({\n  //   click: function(e) {\n  //     e.preventDefault();\n  //     var subject = $(this).parents('.travel-item');\n  //     $.get('/user/wishlist/travellers/' + $(this).attr('t_id') + '/remove').success(function(data) {\n  //       if (data * 1 == 1) {\n  //         $(subject).remove();\n  //       }\n  //     });\n  //   }\n  // }, '.remove-traveller-from-list');\n\n  // $(document).on({\n  //   click: function(e) {\n  //     e.preventDefault();\n  //     var subject = $(this).parents('.product-item');\n  //     $.get('/user/wishlist/products/' + $(this).attr('p_id') + '/remove').success(function(data) {\n  //       if (data * 1 == 1) {\n  //         $(subject).remove();\n  //       }\n  //     });\n  //   }\n  // }, '.remove-product-from-list');\n\n  // $(document).on({\n  //   click: function(e) {\n  //     e.preventDefault();\n  //     var subject = $(this).parents('.buyer-item');\n  //     $.get('/user/wishlist/buyers/' + $(this).attr('b_id') + '/remove').success(function(data) {\n  //       if (data * 1 == 1) {\n  //         $(subject).remove();\n  //       }\n  //     });\n  //   }\n  // }, '.remove-buyer-from-list');\n\n  $(document).on({\n    'keyup change': function(e) {\n      var holder = $(this).parent(),\n        calculation = new Calculator($(this).val(), 0);\n\n      $(holder).find('.total_transaction_charge').text( parseFloat(calculation.transaction_charge * 1 + calculation.fixed_transaction_charge).toFixed(2) );\n      $(holder).find('.total_commission').text(calculation.commission_charge);\n      $(holder).find('.total_price').text(calculation.total);\n\n    }\n  }, '.price');\n\n  $(document).on({\n    'keyup change': function(e) {\n      var holder = $(this).parent();\n\n      var product_price = $(holder).find('.reply_price').val() * 1,\n          traveller_commission = $(holder).find('.reply_traveller_commission').val() * 1,\n          calc = new Calculator(product_price , traveller_commission);\n\n      $(holder).find('.reply_transaction_charge').text( parseFloat(calc.transaction_charge * 1 + calc.fixed_transaction_charge * 1).toFixed(2));\n      $(holder).find('.reply_airposted_commission').text(calc.commission_charge);\n      $(holder).find('.reply_total').text(calc.total);\n\n    }\n  }, '.reply_price, .reply_traveller_commission');\n\n  $(document).on({\n    'keyup change': function() {\n\n      calculate_charge_at_buyer_search_page($(this).parent());\n\n    }\n  }, '.buyer_commission_offer, .buyer_price_offer');\n\n  $('.offer-from-traveller-page').on('submit', function(e) {\n    e.preventDefault();\n\n    var form = $(this);\n\n    var choosenProducts = form.find('.favorite_product:checked');\n    \n    if ( choosenProducts.length * 1 == 0 ) {\n      \n      $(form).find('.message').text('please choose from products you posted to buy.');\n      \n    } else {\n      \n      $(form).find('.message').text(\" \");\n\n      $(choosenProducts).each(function(i, v) {\n\n        $(this).after(' <input class=\"hidden\" name=\"name[]\" value=\"' + $(this).attr('p_name') + '\" />\\\n                        <input class=\"hidden\" name=\"link[]\" value=\"' + $(this).attr('p_link') + '\" />\\\n                        <input class=\"hidden\" name=\"buypost_id[]\" value=\"' + $(this).attr('p_buypost_id') + '\" />\\\n                        <input class=\"hidden\" name=\"image_url[]\" value=\"' + $(this).attr('p_image') + '\" />\\\n                        <input class=\"hidden\" name=\"product_price[]\" value=\"' + $(this).attr('p_price') + '\" />\\\n                        <input class=\"hidden\" name=\"offer_price[]\" value=\"' + ( $(this).attr('p_price') * 1 + $(this).attr('c_price') * 1 ) + '\" />\\\n                        <input class=\"hidden\" name=\"is_offer_from_buyer[]\" value=\"1\" />\\\n                        <input class=\"hidden\" name=\"is_offer_from_traveller[]\" value=\"0\" />\\\n        ');\n        \n      });\n\n\n    }\n    \n    if( choosenProducts.length > 0 ){\n\n      $(form).find('.message').text('Sending request to the Traveler...');\n      \n      var data = $(this).serializeArray();\n      $('[name=\"name[]\"],[name=\"link[]\"],[name=\"image_url[]\"],[name=\"product_price[]\"],[name=\"offer_price[]\"],[name=\"is_offer_from_buyer[]\"],[name=\"is_offer_from_traveller[]\"],[name=\"p_buypost_id[]\"]').remove();\n      \n      $.ajax({\n        method: 'POST',\n        data: data,\n        url: $(this).attr('action'),\n        success: function(data) {\n          $(form).find('.message').html(data);\n        }\n      });\n    \n    }\n\n  });\n\n  $('.offer-from-product-search').on('submit', function(e) {\n    e.preventDefault();\n\n    var form = $(this),\n      choosenProducts = $('[name=\"traveller[]\"]:checked');\n\n    if ($('[name=\"traveller[]\"]:checked').length == 0) {\n      $(form).find('.message').text('please choose atleast one Traveler from your favorite list.');\n    }\n\n    $(form).find('.message').text('Sending request to the Travelers...');\n\n    $.ajax({\n      method: 'POST',\n      data: $(this).serializeArray(),\n      url: $(this).attr('action'),\n      success: function(data) {\n        $(form).find('.message').text(data);\n      }\n    });\n\n  });\n\n  $('.post-offer-from-buyer-search').on('submit', function(e) {\n    e.preventDefault();\n\n    var form = $(this);\n\n    if ($(form).find('.offer-price').val().length == 0) {\n      $(form).find('.message').html('please offer a price to the buyer.');\n    }\n\n    $(form).find('.message').html('Sending request to the Buyer...');\n\n    $.ajax({\n      method: 'POST',\n      data: $(this).serializeArray(),\n      url: $(this).attr('action'),\n      success: function(data) {\n        $(form).find('.message').html(data);\n      }\n    });\n\n  });\n\n  $(document).on({\n    submit: function(e) {\n      e.preventDefault();\n      var form = $(this);\n      var message = $(form).find('.message');\n      if ($(form).find('.reply_price').val().length == 0 || $(form).find('.reply_traveller_commission').val().length == 0) {\n        $(message).text('Please enter Product price and Traveler commission.');\n      }\n      else {\n        $(message).text('Sending');\n        $.ajax({\n          method: 'POST',\n          url: $(form).attr('action'),\n          data: $(form).serializeArray(),\n          success: function(data) {\n            if (data * 1 == 1) {\n              $(message).text('Sent. Reloading the page.');\n              setTimeout(function() {\n                window.location.reload()\n              }, 3000);\n            }\n            else {\n              $(message).text(data);\n            }\n          }\n        });\n      }\n    }\n  }, '.offer_made_by_user');\n\n  $(document).on({\n    'keyup change': function() {\n      var price = $(this).parents('.offer-from-traveller-page').find('.manual_price').val(),\n        commission = $(this).parents('.offer-from-traveller-page').find('.manual_traveller_commission').val();\n\n      var c = new Calculator(price, commission);\n\n      $(this).parents('.offer-from-traveller-page').find('.manual_transaction_charge').text( parseFloat(c.transaction_charge * 1 + c.fixed_transaction_charge * 1).toFixed(2) );\n      $(this).parents('.offer-from-traveller-page').find('.manual_airposted_commission').text(c.commission_charge);\n      $(this).parents('.offer-from-traveller-page').find('.manual_total').text(c.total);\n\n    }\n  }, '.offer-from-traveller-page .manual_price, .offer-from-traveller-page .manual_traveller_commission');\n\n  $('.message-to-traveller-buyer').on('submit', function(e) {\n\n    e.preventDefault();\n\n    var form = $(this);\n\n    $(form).find('.message').text('Sending message...');\n\n    $.post($(form).attr('action'), $(form).serializeArray(), function(data) {\n      $(form).find('.message').text(data);\n    });\n\n  });\n  \n  $('.advert .close').click(function(e){\n    e.preventDefault();\n    $(this).parents('.advert').fadeOut(1500, function(){ $(this).remove(); });\n  });\n  \n  $('.floating-contact h4').click(function(e){\n    e.preventDefault();\n    $('.floating-contact form').toggle();\n  });\n  \n  $(document).on({\n    \n    submit: function(e){\n      \n      e.preventDefault();\n      \n      var form  = $(this),\n          url   = form.attr('action'),\n          data  = form.serialize(),\n          attr  = form.attr('offer'),\n          li    = $('[offer-id=\"'+attr+'\"]');\n          \n      form.find('input[type=submit]').val('processing..');\n          \n      $.post(url, data, function(data){\n        \n        li.replaceWith(data);\n        \n        form.find('input[type=submit]').val('Done');\n        \n        form.parents('.popover').remove();\n        \n        $('[data-toggle=\"popover\"]').popover({ 'html' : true, 'viewport' : 'body' });\n        \n      });\n      \n    }\n    \n  }, '.counter-offer-popover, .reject-offer-popover');\n  \n  $(document).on({\n    \n    click: function(e){\n      \n      e.preventDefault();\n      \n      var source = $(this),\n          url   = source.attr('href'),\n          attr  = source.attr('offer'),\n          li    = $('[offer-id=\"'+attr+'\"]');\n          \n      source.text('processing..');\n          \n      $.get(url, function(data){\n        \n        li.replaceWith(data);\n        \n        $('[data-toggle=\"popover\"]').popover({ 'html' : true, 'viewport' : 'body' });\n        \n      });\n      \n    }\n    \n  }, '.accept-offer');\n  \n  $('.login-signup').click(function(e){ e.preventDefault(); $( $(this).attr('data-target') ).modal('show'); });\n  \n  $('.toggle-profile').click(function(e){\n    e.preventDefault();\n    $('.profile-form').toggleClass('edit');\n  });\n  \n  $('.inbox').click( mark_user_chat_read );\n  \n  $('.add-item-to-order').click(function(e){ e.preventDefault(); });\n  \n  $(document).on({ \n    \n    click: function(e){\n      e.preventDefault();\n      $('.order-more').before( amazon_form );\n      \n      setTimeout(function(){\n        $('.order-more').prev().find('select').select2();\n      }, 1000);\n      \n      $('.order-more h2, .next-to-shipping').removeClass('hidden');\n    }\n    \n    \n  }, '.trigger-buy-from-amazon');\n  \n  $(document).on({ \n    \n    click: function(e){\n      e.preventDefault();\n      $('.order-more').before( elsewhere_form );\n      \n      setTimeout(function(){\n        $('.order-more').prev().find('select').select2();\n      }, 1000);\n      \n      $('.order-more h2, .next-to-shipping').removeClass('hidden');\n    }\n    \n  }, '.trigger-buy-from-elsewhere');\n  \n  \n  $(document).on({\n    click: function(e){\n      e.preventDefault();\n      $(this).parents('.product-picker').remove();\n      if( $('.product-picker').length == 0 ) $('.order-more h2, .next-to-shipping').addClass('hidden');\n    }\n  }, '.del');\n  \n  \n  $('.ajax-login').submit(function(e){\n    \n    e.preventDefault();\n    \n    var form = $(this),\n        button = form.find('.login-button'),\n        message = form.find('.login-message'),\n        action = form.attr('login-url');\n        \n    message.text(\"\");\n    \n    button.html(`<i class=\"fa fa-spin fa-spinner\"></i> LOGGIN IN...`);\n    \n    $.post( action, form.serialize() ).success(function(data){\n      \n      message.text( data.message );\n      \n      if( data.result == 'success' ){\n        \n        button.html(`LOGGED IN`);\n        \n        window.location.href = data.url;\n        \n      } else if( data.result == 'failed' ){\n        \n        button.html(`LOG IN`);\n        \n      }\n      \n    }).error(function(data){\n      \n      message.text('Failed to authenticate. Cotact admin if the issue persists.');\n      \n      button.html(`RETRY LOG IN`);\n      \n    });\n    \n  });\n  \n  $('.ajax-signup').submit(function(e){\n    \n    e.preventDefault();\n    \n    var form = $(this),\n        button = form.find('.signup-button'),\n        message = form.find('.signup-message'),\n        action = form.attr('sign-url');\n        \n    message.html(\"\");\n    \n    button.html(`<i class=\"fa fa-spin fa-spinner\"></i> Signing up...`);\n    \n    $.post( action, form.serialize() ).success(function(data){\n      \n      \n      \n      if( data.status == 'success' ){\n        \n        message.html( data.message );\n        \n        button.html(`SIGN UP SUCCESS.`);\n        \n        window.location.href = data.url;\n        \n      } else if( data.status == 'failed' ){\n        \n        button.html(`SIGN UP`);\n        \n        message.html( `<br /> <span class=\"blue-text\">FAILED TO SIGN UP!</span> <br />` );\n        \n        data.message.forEach(function(v){\n          \n          message.append( \"- \" + v + \"<br />\" );\n          \n        });\n        \n      }\n      \n    }).error(function(data){\n      \n      message.html('Failed to Sign you up. Please check data and retry.');\n      \n      button.html(`SIGN UP`);\n      \n    });\n        \n    \n  });\n  \n  $('.notification').click(function(){\n    \n    $.get('/user/notifications/mark-read');\n    \n    $(this).find('sup').html('0');\n    \n  });\n  \n});\n\n\n$(window).load(function() {\n\n  setTimeout(function() {\n\n    populate_travellers_at_product_page();\n\n    populate_products_at_traveller_page();\n    \n    chat_refresh();\n    \n    balance_height();\n\n  }, 2000);\n\n  tourguide_init();\n\n});"]}